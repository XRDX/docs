

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="zh" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="zh" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Object 对象的相关方法 &mdash; JS 教程 beta 文档</title>
  

  
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="index" title="索引" href="../genindex.html" />
    <link rel="search" title="搜索" href="../search.html" />
    <link rel="next" title="面向对象编程的模式" href="pattern.html" />
    <link rel="prev" title="prototype 对象" href="prototype.html" /> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> JS 教程
          

          
          </a>

          
            
            
              <div class="version">
                0.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../introduction/index.html">导论</a></li>
<li class="toctree-l1"><a class="reference internal" href="../grammar/index.html">基本语法</a></li>
<li class="toctree-l1"><a class="reference internal" href="../stdlib/index.html">stdlib 标准库</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">面向对象编程</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="basic.html">构造函数与 new 命令</a></li>
<li class="toctree-l2"><a class="reference internal" href="this.html">this 关键字</a></li>
<li class="toctree-l2"><a class="reference internal" href="prototype.html">prototype 对象</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Object 对象的相关方法</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#object-getprototypeof">Object.getPrototypeOf()</a></li>
<li class="toctree-l3"><a class="reference internal" href="#object-setprototypeof">Object.setPrototypeOf()</a></li>
<li class="toctree-l3"><a class="reference internal" href="#object-create">Object.create()</a></li>
<li class="toctree-l3"><a class="reference internal" href="#object-prototype-isprototypeof">Object.prototype.isPrototypeOf()</a></li>
<li class="toctree-l3"><a class="reference internal" href="#object-prototype-proto">Object.prototype.__proto__</a></li>
<li class="toctree-l3"><a class="reference internal" href="#">获取原型对象方法的比较</a></li>
<li class="toctree-l3"><a class="reference internal" href="#object-getownpropertynames">Object.getOwnPropertyNames()</a></li>
<li class="toctree-l3"><a class="reference internal" href="#object-prototype-hasownproperty">Object.prototype.hasOwnProperty()</a></li>
<li class="toctree-l3"><a class="reference internal" href="#in-for-in">in 运算符和 for...in 循环</a></li>
<li class="toctree-l3"><a class="reference internal" href="#">对象的拷贝</a></li>
<li class="toctree-l3"><a class="reference internal" href="#">参考链接</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="pattern.html">面向对象编程的模式</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../advanced/index.html">语法专题</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dom/index.html">DOM 模型</a></li>
<li class="toctree-l1"><a class="reference internal" href="../bom/index.html">BOM 浏览器环境</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">JS 教程</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="index.html">面向对象编程</a> &raquo;</li>
        
      <li>Object 对象的相关方法</li>
    
    

  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="object">
<span id="object"></span><h1>Object 对象的相关方法<a class="headerlink" href="#object" title="永久链接至标题">¶</a></h1>
<p>JavaScript 在<code class="docutils literal notranslate"><span class="pre">Object</span></code>对象上面，提供了很多相关方法，处理面向对象编程的相关操作。本章介绍这些方法。</p>
<div class="section" id="object-getprototypeof">
<span id="object-getprototypeof"></span><h2>Object.getPrototypeOf()<a class="headerlink" href="#object-getprototypeof" title="永久链接至标题">¶</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">Object.getPrototypeOf</span></code>方法返回参数对象的原型。这是获取原型对象的标准方法。</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">F</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{};</span>
<span class="kd">var</span> <span class="nx">f</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">F</span><span class="p">();</span>
<span class="nb">Object</span><span class="p">.</span><span class="nx">getPrototypeOf</span><span class="p">(</span><span class="nx">f</span><span class="p">)</span> <span class="o">===</span> <span class="nx">F</span><span class="p">.</span><span class="nx">prototype</span> <span class="c1">// true</span>
</pre></div>
</div>
<p>上面代码中，实例对象<code class="docutils literal notranslate"><span class="pre">f</span></code>的原型是<code class="docutils literal notranslate"><span class="pre">F.prototype</span></code>。</p>
<p>下面是几种特殊对象的原型。</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="c1">// 空对象的原型是 Object.prototype</span>
<span class="nb">Object</span><span class="p">.</span><span class="nx">getPrototypeOf</span><span class="p">({})</span> <span class="o">===</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">prototype</span> <span class="c1">// true</span>

<span class="c1">// Object.prototype 的原型是 null</span>
<span class="nb">Object</span><span class="p">.</span><span class="nx">getPrototypeOf</span><span class="p">(</span><span class="nb">Object</span><span class="p">.</span><span class="nx">prototype</span><span class="p">)</span> <span class="o">===</span> <span class="kc">null</span> <span class="c1">// true</span>

<span class="c1">// 函数的原型是 Function.prototype</span>
<span class="kd">function</span> <span class="nx">f</span><span class="p">()</span> <span class="p">{}</span>
<span class="nb">Object</span><span class="p">.</span><span class="nx">getPrototypeOf</span><span class="p">(</span><span class="nx">f</span><span class="p">)</span> <span class="o">===</span> <span class="nb">Function</span><span class="p">.</span><span class="nx">prototype</span> <span class="c1">// true</span>
</pre></div>
</div>
</div>
<div class="section" id="object-setprototypeof">
<span id="object-setprototypeof"></span><h2>Object.setPrototypeOf()<a class="headerlink" href="#object-setprototypeof" title="永久链接至标题">¶</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">Object.setPrototypeOf</span></code>方法为参数对象设置原型，返回该参数对象。它接受两个参数，第一个是现有对象，第二个是原型对象。</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">a</span> <span class="o">=</span> <span class="p">{};</span>
<span class="kd">var</span> <span class="nx">b</span> <span class="o">=</span> <span class="p">{</span><span class="nx">x</span><span class="o">:</span> <span class="mi">1</span><span class="p">};</span>
<span class="nb">Object</span><span class="p">.</span><span class="nx">setPrototypeOf</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">);</span>

<span class="nb">Object</span><span class="p">.</span><span class="nx">getPrototypeOf</span><span class="p">(</span><span class="nx">a</span><span class="p">)</span> <span class="o">===</span> <span class="nx">b</span> <span class="c1">// true</span>
<span class="nx">a</span><span class="p">.</span><span class="nx">x</span> <span class="c1">// 1</span>
</pre></div>
</div>
<p>上面代码中，<code class="docutils literal notranslate"><span class="pre">Object.setPrototypeOf</span></code>方法将对象<code class="docutils literal notranslate"><span class="pre">a</span></code>的原型，设置为对象<code class="docutils literal notranslate"><span class="pre">b</span></code>，因此<code class="docutils literal notranslate"><span class="pre">a</span></code>可以共享<code class="docutils literal notranslate"><span class="pre">b</span></code>的属性。</p>
<p><code class="docutils literal notranslate"><span class="pre">new</span></code>命令可以使用<code class="docutils literal notranslate"><span class="pre">Object.setPrototypeOf</span></code>方法模拟。</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">F</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">foo</span> <span class="o">=</span> <span class="s1">&#39;bar&#39;</span><span class="p">;</span>
<span class="p">};</span>

<span class="kd">var</span> <span class="nx">f</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">F</span><span class="p">();</span>
<span class="c1">// 等同于</span>
<span class="kd">var</span> <span class="nx">f</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">setPrototypeOf</span><span class="p">({},</span> <span class="nx">F</span><span class="p">.</span><span class="nx">prototype</span><span class="p">);</span>
<span class="nx">F</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">f</span><span class="p">);</span>
</pre></div>
</div>
<p>上面代码中，<code class="docutils literal notranslate"><span class="pre">new</span></code>命令新建实例对象，其实可以分成两步。第一步，将一个空对象的原型设为构造函数的<code class="docutils literal notranslate"><span class="pre">prototype</span></code>属性（上例是<code class="docutils literal notranslate"><span class="pre">F.prototype</span></code>）；第二步，将构造函数内部的<code class="docutils literal notranslate"><span class="pre">this</span></code>绑定这个空对象，然后执行构造函数，使得定义在<code class="docutils literal notranslate"><span class="pre">this</span></code>上面的方法和属性（上例是<code class="docutils literal notranslate"><span class="pre">this.foo</span></code>），都转移到这个空对象上。</p>
</div>
<div class="section" id="object-create">
<span id="object-create"></span><h2>Object.create()<a class="headerlink" href="#object-create" title="永久链接至标题">¶</a></h2>
<p>生成实例对象的常用方法是，使用<code class="docutils literal notranslate"><span class="pre">new</span></code>命令让构造函数返回一个实例。但是很多时候，只能拿到一个实例对象，它可能根本不是由构建函数生成的，那么能不能从一个实例对象，生成另一个实例对象呢？</p>
<p>JavaScript 提供了<code class="docutils literal notranslate"><span class="pre">Object.create</span></code>方法，用来满足这种需求。该方法接受一个对象作为参数，然后以它为原型，返回一个实例对象。该实例完全继承原型对象的属性。</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="c1">// 原型对象</span>
<span class="kd">var</span> <span class="nx">A</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">print</span><span class="o">:</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;hello&#39;</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">};</span>

<span class="c1">// 实例对象</span>
<span class="kd">var</span> <span class="nx">B</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="nx">A</span><span class="p">);</span>

<span class="nb">Object</span><span class="p">.</span><span class="nx">getPrototypeOf</span><span class="p">(</span><span class="nx">B</span><span class="p">)</span> <span class="o">===</span> <span class="nx">A</span> <span class="c1">// true</span>
<span class="nx">B</span><span class="p">.</span><span class="nx">print</span><span class="p">()</span> <span class="c1">// hello</span>
<span class="nx">B</span><span class="p">.</span><span class="nx">print</span> <span class="o">===</span> <span class="nx">A</span><span class="p">.</span><span class="nx">print</span> <span class="c1">// true</span>
</pre></div>
</div>
<p>上面代码中，<code class="docutils literal notranslate"><span class="pre">Object.create</span></code>方法以<code class="docutils literal notranslate"><span class="pre">A</span></code>对象为原型，生成了<code class="docutils literal notranslate"><span class="pre">B</span></code>对象。<code class="docutils literal notranslate"><span class="pre">B</span></code>继承了<code class="docutils literal notranslate"><span class="pre">A</span></code>的所有属性和方法。</p>
<p>实际上，<code class="docutils literal notranslate"><span class="pre">Object.create</span></code>方法可以用下面的代码代替。</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">create</span> <span class="o">!==</span> <span class="s1">&#39;function&#39;</span><span class="p">)</span> <span class="p">{</span>
  <span class="nb">Object</span><span class="p">.</span><span class="nx">create</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">obj</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">function</span> <span class="nx">F</span><span class="p">()</span> <span class="p">{}</span>
    <span class="nx">F</span><span class="p">.</span><span class="nx">prototype</span> <span class="o">=</span> <span class="nx">obj</span><span class="p">;</span>
    <span class="k">return</span> <span class="k">new</span> <span class="nx">F</span><span class="p">();</span>
  <span class="p">};</span>
<span class="p">}</span>
</pre></div>
</div>
<p>上面代码表明，<code class="docutils literal notranslate"><span class="pre">Object.create</span></code>方法的实质是新建一个空的构造函数<code class="docutils literal notranslate"><span class="pre">F</span></code>，然后让<code class="docutils literal notranslate"><span class="pre">F.prototype</span></code>属性指向参数对象<code class="docutils literal notranslate"><span class="pre">obj</span></code>，最后返回一个<code class="docutils literal notranslate"><span class="pre">F</span></code>的实例，从而实现让该实例继承<code class="docutils literal notranslate"><span class="pre">obj</span></code>的属性。</p>
<p>下面三种方式生成的新对象是等价的。</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">obj1</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">create</span><span class="p">({});</span>
<span class="kd">var</span> <span class="nx">obj2</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="nb">Object</span><span class="p">.</span><span class="nx">prototype</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">obj3</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Object</span><span class="p">();</span>
</pre></div>
</div>
<p>如果想要生成一个不继承任何属性（比如没有<code class="docutils literal notranslate"><span class="pre">toString</span></code>和<code class="docutils literal notranslate"><span class="pre">valueOf</span></code>方法）的对象，可以将<code class="docutils literal notranslate"><span class="pre">Object.create</span></code>的参数设为<code class="docutils literal notranslate"><span class="pre">null</span></code>。</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">obj</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="kc">null</span><span class="p">);</span>

<span class="nx">obj</span><span class="p">.</span><span class="nx">valueOf</span><span class="p">()</span>
<span class="c1">// TypeError: Object [object Object] has no method &#39;valueOf&#39;</span>
</pre></div>
</div>
<p>上面代码中，对象<code class="docutils literal notranslate"><span class="pre">obj</span></code>的原型是<code class="docutils literal notranslate"><span class="pre">null</span></code>，它就不具备一些定义在<code class="docutils literal notranslate"><span class="pre">Object.prototype</span></code>对象上面的属性，比如<code class="docutils literal notranslate"><span class="pre">valueOf</span></code>方法。</p>
<p>使用<code class="docutils literal notranslate"><span class="pre">Object.create</span></code>方法的时候，必须提供对象原型，即参数不能为空，或者不是对象，否则会报错。</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nb">Object</span><span class="p">.</span><span class="nx">create</span><span class="p">()</span>
<span class="c1">// TypeError: Object prototype may only be an Object or null</span>
<span class="nb">Object</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="mi">123</span><span class="p">)</span>
<span class="c1">// TypeError: Object prototype may only be an Object or null</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">Object.create</span></code>方法生成的新对象，动态继承了原型。在原型上添加或修改任何方法，会立刻反映在新对象之上。</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">obj1</span> <span class="o">=</span> <span class="p">{</span> <span class="nx">p</span><span class="o">:</span> <span class="mi">1</span> <span class="p">};</span>
<span class="kd">var</span> <span class="nx">obj2</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="nx">obj1</span><span class="p">);</span>

<span class="nx">obj1</span><span class="p">.</span><span class="nx">p</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
<span class="nx">obj2</span><span class="p">.</span><span class="nx">p</span> <span class="c1">// 2</span>
</pre></div>
</div>
<p>上面代码中，修改对象原型<code class="docutils literal notranslate"><span class="pre">obj1</span></code>会影响到实例对象<code class="docutils literal notranslate"><span class="pre">obj2</span></code>。</p>
<p>除了对象的原型，<code class="docutils literal notranslate"><span class="pre">Object.create</span></code>方法还可以接受第二个参数。该参数是一个属性描述对象，它所描述的对象属性，会添加到实例对象，作为该对象自身的属性。</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">obj</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">create</span><span class="p">({},</span> <span class="p">{</span>
  <span class="nx">p1</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">value</span><span class="o">:</span> <span class="mi">123</span><span class="p">,</span>
    <span class="nx">enumerable</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="nx">configurable</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="nx">writable</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
  <span class="p">},</span>
  <span class="nx">p2</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">value</span><span class="o">:</span> <span class="s1">&#39;abc&#39;</span><span class="p">,</span>
    <span class="nx">enumerable</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="nx">configurable</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="nx">writable</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
  <span class="p">}</span>
<span class="p">});</span>

<span class="c1">// 等同于</span>
<span class="kd">var</span> <span class="nx">obj</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">create</span><span class="p">({});</span>
<span class="nx">obj</span><span class="p">.</span><span class="nx">p1</span> <span class="o">=</span> <span class="mi">123</span><span class="p">;</span>
<span class="nx">obj</span><span class="p">.</span><span class="nx">p2</span> <span class="o">=</span> <span class="s1">&#39;abc&#39;</span><span class="p">;</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">Object.create</span></code>方法生成的对象，继承了它的原型对象的构造函数。</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">function</span> <span class="nx">A</span><span class="p">()</span> <span class="p">{}</span>
<span class="kd">var</span> <span class="nx">a</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">A</span><span class="p">();</span>
<span class="kd">var</span> <span class="nx">b</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="nx">a</span><span class="p">);</span>

<span class="nx">b</span><span class="p">.</span><span class="nx">constructor</span> <span class="o">===</span> <span class="nx">A</span> <span class="c1">// true</span>
<span class="nx">b</span> <span class="k">instanceof</span> <span class="nx">A</span> <span class="c1">// true</span>
</pre></div>
</div>
<p>上面代码中，<code class="docutils literal notranslate"><span class="pre">b</span></code>对象的原型是<code class="docutils literal notranslate"><span class="pre">a</span></code>对象，因此继承了<code class="docutils literal notranslate"><span class="pre">a</span></code>对象的构造函数<code class="docutils literal notranslate"><span class="pre">A</span></code>。</p>
</div>
<div class="section" id="object-prototype-isprototypeof">
<span id="object-prototype-isprototypeof"></span><h2>Object.prototype.isPrototypeOf()<a class="headerlink" href="#object-prototype-isprototypeof" title="永久链接至标题">¶</a></h2>
<p>实例对象的<code class="docutils literal notranslate"><span class="pre">isPrototypeOf</span></code>方法，用来判断该对象是否为参数对象的原型。</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">o1</span> <span class="o">=</span> <span class="p">{};</span>
<span class="kd">var</span> <span class="nx">o2</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="nx">o1</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">o3</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="nx">o2</span><span class="p">);</span>

<span class="nx">o2</span><span class="p">.</span><span class="nx">isPrototypeOf</span><span class="p">(</span><span class="nx">o3</span><span class="p">)</span> <span class="c1">// true</span>
<span class="nx">o1</span><span class="p">.</span><span class="nx">isPrototypeOf</span><span class="p">(</span><span class="nx">o3</span><span class="p">)</span> <span class="c1">// true</span>
</pre></div>
</div>
<p>上面代码中，<code class="docutils literal notranslate"><span class="pre">o1</span></code>和<code class="docutils literal notranslate"><span class="pre">o2</span></code>都是<code class="docutils literal notranslate"><span class="pre">o3</span></code>的原型。这表明只要实例对象处在参数对象的原型链上，<code class="docutils literal notranslate"><span class="pre">isPrototypeOf</span></code>方法都返回<code class="docutils literal notranslate"><span class="pre">true</span></code>。</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nb">Object</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">isPrototypeOf</span><span class="p">({})</span> <span class="c1">// true</span>
<span class="nb">Object</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">isPrototypeOf</span><span class="p">([])</span> <span class="c1">// true</span>
<span class="nb">Object</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">isPrototypeOf</span><span class="p">(</span><span class="sr">/xyz/</span><span class="p">)</span> <span class="c1">// true</span>
<span class="nb">Object</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">isPrototypeOf</span><span class="p">(</span><span class="nb">Object</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="kc">null</span><span class="p">))</span> <span class="c1">// false</span>
</pre></div>
</div>
<p>上面代码中，由于<code class="docutils literal notranslate"><span class="pre">Object.prototype</span></code>处于原型链的最顶端，所以对各种实例都返回<code class="docutils literal notranslate"><span class="pre">true</span></code>，只有直接继承自<code class="docutils literal notranslate"><span class="pre">null</span></code>的对象除外。</p>
</div>
<div class="section" id="object-prototype-proto">
<span id="object-prototype-proto"></span><h2>Object.prototype.__proto__<a class="headerlink" href="#object-prototype-proto" title="永久链接至标题">¶</a></h2>
<p>实例对象的<code class="docutils literal notranslate"><span class="pre">__proto__</span></code>属性（前后各两个下划线），返回该对象的原型。该属性可读写。</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">obj</span> <span class="o">=</span> <span class="p">{};</span>
<span class="kd">var</span> <span class="nx">p</span> <span class="o">=</span> <span class="p">{};</span>

<span class="nx">obj</span><span class="p">.</span><span class="nx">__proto__</span> <span class="o">=</span> <span class="nx">p</span><span class="p">;</span>
<span class="nb">Object</span><span class="p">.</span><span class="nx">getPrototypeOf</span><span class="p">(</span><span class="nx">obj</span><span class="p">)</span> <span class="o">===</span> <span class="nx">p</span> <span class="c1">// true</span>
</pre></div>
</div>
<p>上面代码通过<code class="docutils literal notranslate"><span class="pre">__proto__</span></code>属性，将<code class="docutils literal notranslate"><span class="pre">p</span></code>对象设为<code class="docutils literal notranslate"><span class="pre">obj</span></code>对象的原型。</p>
<p>根据语言标准，<code class="docutils literal notranslate"><span class="pre">__proto__</span></code>属性只有浏览器才需要部署，其他环境可以没有这个属性。它前后的两根下划线，表明它本质是一个内部属性，不应该对使用者暴露。因此，应该尽量少用这个属性，而是用<code class="docutils literal notranslate"><span class="pre">Object.getPrototypeof()</span></code>和<code class="docutils literal notranslate"><span class="pre">Object.setPrototypeOf()</span></code>，进行原型对象的读写操作。</p>
<p>原型链可以用<code class="docutils literal notranslate"><span class="pre">__proto__</span></code>很直观地表示。</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">A</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;张三&#39;</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">B</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;李四&#39;</span>
<span class="p">};</span>

<span class="kd">var</span> <span class="nx">proto</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">print</span><span class="o">:</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">name</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">};</span>

<span class="nx">A</span><span class="p">.</span><span class="nx">__proto__</span> <span class="o">=</span> <span class="nx">proto</span><span class="p">;</span>
<span class="nx">B</span><span class="p">.</span><span class="nx">__proto__</span> <span class="o">=</span> <span class="nx">proto</span><span class="p">;</span>

<span class="nx">A</span><span class="p">.</span><span class="nx">print</span><span class="p">()</span> <span class="c1">// 张三</span>
<span class="nx">B</span><span class="p">.</span><span class="nx">print</span><span class="p">()</span> <span class="c1">// 李四</span>

<span class="nx">A</span><span class="p">.</span><span class="nx">print</span> <span class="o">===</span> <span class="nx">B</span><span class="p">.</span><span class="nx">print</span> <span class="c1">// true</span>
<span class="nx">A</span><span class="p">.</span><span class="nx">print</span> <span class="o">===</span> <span class="nx">proto</span><span class="p">.</span><span class="nx">print</span> <span class="c1">// true</span>
<span class="nx">B</span><span class="p">.</span><span class="nx">print</span> <span class="o">===</span> <span class="nx">proto</span><span class="p">.</span><span class="nx">print</span> <span class="c1">// true</span>
</pre></div>
</div>
<p>上面代码中，<code class="docutils literal notranslate"><span class="pre">A</span></code>对象和<code class="docutils literal notranslate"><span class="pre">B</span></code>对象的原型都是<code class="docutils literal notranslate"><span class="pre">proto</span></code>对象，它们都共享<code class="docutils literal notranslate"><span class="pre">proto</span></code>对象的<code class="docutils literal notranslate"><span class="pre">print</span></code>方法。也就是说，<code class="docutils literal notranslate"><span class="pre">A</span></code>和<code class="docutils literal notranslate"><span class="pre">B</span></code>的<code class="docutils literal notranslate"><span class="pre">print</span></code>方法，都是在调用<code class="docutils literal notranslate"><span class="pre">proto</span></code>对象的<code class="docutils literal notranslate"><span class="pre">print</span></code>方法。</p>
</div>
<div class="section" id="">
<span id="id1"></span><h2>获取原型对象方法的比较<a class="headerlink" href="#" title="永久链接至标题">¶</a></h2>
<p>如前所述，<code class="docutils literal notranslate"><span class="pre">__proto__</span></code>属性指向当前对象的原型对象，即构造函数的<code class="docutils literal notranslate"><span class="pre">prototype</span></code>属性。</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">obj</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Object</span><span class="p">();</span>

<span class="nx">obj</span><span class="p">.</span><span class="nx">__proto__</span> <span class="o">===</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">prototype</span>
<span class="c1">// true</span>
<span class="nx">obj</span><span class="p">.</span><span class="nx">__proto__</span> <span class="o">===</span> <span class="nx">obj</span><span class="p">.</span><span class="nx">constructor</span><span class="p">.</span><span class="nx">prototype</span>
<span class="c1">// true</span>
</pre></div>
</div>
<p>上面代码首先新建了一个对象<code class="docutils literal notranslate"><span class="pre">obj</span></code>，它的<code class="docutils literal notranslate"><span class="pre">__proto__</span></code>属性，指向构造函数（<code class="docutils literal notranslate"><span class="pre">Object</span></code>或<code class="docutils literal notranslate"><span class="pre">obj.constructor</span></code>）的<code class="docutils literal notranslate"><span class="pre">prototype</span></code>属性。</p>
<p>因此，获取实例对象<code class="docutils literal notranslate"><span class="pre">obj</span></code>的原型对象，有三种方法。</p>
<ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">obj.__proto__</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">obj.constructor.prototype</span></code></li>
<li><code class="docutils literal notranslate"><span class="pre">Object.getPrototypeOf(obj)</span></code></li>
</ul>
<p>上面三种方法之中，前两种都不是很可靠。<code class="docutils literal notranslate"><span class="pre">__proto__</span></code>属性只有浏览器才需要部署，其他环境可以不部署。而<code class="docutils literal notranslate"><span class="pre">obj.constructor.prototype</span></code>在手动改变原型对象时，可能会失效。</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">P</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{};</span>
<span class="kd">var</span> <span class="nx">p</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">P</span><span class="p">();</span>

<span class="kd">var</span> <span class="nx">C</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{};</span>
<span class="nx">C</span><span class="p">.</span><span class="nx">prototype</span> <span class="o">=</span> <span class="nx">p</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">c</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">C</span><span class="p">();</span>

<span class="nx">c</span><span class="p">.</span><span class="nx">constructor</span><span class="p">.</span><span class="nx">prototype</span> <span class="o">===</span> <span class="nx">p</span> <span class="c1">// false</span>
</pre></div>
</div>
<p>上面代码中，构造函数<code class="docutils literal notranslate"><span class="pre">C</span></code>的原型对象被改成了<code class="docutils literal notranslate"><span class="pre">p</span></code>，但是实例对象的<code class="docutils literal notranslate"><span class="pre">c.constructor.prototype</span></code>却没有指向<code class="docutils literal notranslate"><span class="pre">p</span></code>。所以，在改变原型对象时，一般要同时设置<code class="docutils literal notranslate"><span class="pre">constructor</span></code>属性。</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nx">C</span><span class="p">.</span><span class="nx">prototype</span> <span class="o">=</span> <span class="nx">p</span><span class="p">;</span>
<span class="nx">C</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">constructor</span> <span class="o">=</span> <span class="nx">C</span><span class="p">;</span>

<span class="kd">var</span> <span class="nx">c</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">C</span><span class="p">();</span>
<span class="nx">c</span><span class="p">.</span><span class="nx">constructor</span><span class="p">.</span><span class="nx">prototype</span> <span class="o">===</span> <span class="nx">p</span> <span class="c1">// true</span>
</pre></div>
</div>
<p>因此，推荐使用第三种<code class="docutils literal notranslate"><span class="pre">Object.getPrototypeOf</span></code>方法，获取原型对象。</p>
</div>
<div class="section" id="object-getownpropertynames">
<span id="object-getownpropertynames"></span><h2>Object.getOwnPropertyNames()<a class="headerlink" href="#object-getownpropertynames" title="永久链接至标题">¶</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">Object.getOwnPropertyNames</span></code>方法返回一个数组，成员是参数对象本身的所有属性的键名，不包含继承的属性键名。</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nb">Object</span><span class="p">.</span><span class="nx">getOwnPropertyNames</span><span class="p">(</span><span class="nb">Date</span><span class="p">)</span>
<span class="c1">// [&quot;parse&quot;, &quot;arguments&quot;, &quot;UTC&quot;, &quot;caller&quot;, &quot;name&quot;, &quot;prototype&quot;, &quot;now&quot;, &quot;length&quot;]</span>
</pre></div>
</div>
<p>上面代码中，<code class="docutils literal notranslate"><span class="pre">Object.getOwnPropertyNames</span></code>方法返回<code class="docutils literal notranslate"><span class="pre">Date</span></code>所有自身的属性名。</p>
<p>对象本身的属性之中，有的是可以遍历的（enumerable），有的是不可以遍历的。<code class="docutils literal notranslate"><span class="pre">Object.getOwnPropertyNames</span></code>方法返回所有键名，不管是否可以遍历。只获取那些可以遍历的属性，使用<code class="docutils literal notranslate"><span class="pre">Object.keys</span></code>方法。</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nb">Object</span><span class="p">.</span><span class="nx">keys</span><span class="p">(</span><span class="nb">Date</span><span class="p">)</span> <span class="c1">// []</span>
</pre></div>
</div>
<p>上面代码表明，<code class="docutils literal notranslate"><span class="pre">Date</span></code>对象所有自身的属性，都是不可以遍历的。</p>
</div>
<div class="section" id="object-prototype-hasownproperty">
<span id="object-prototype-hasownproperty"></span><h2>Object.prototype.hasOwnProperty()<a class="headerlink" href="#object-prototype-hasownproperty" title="永久链接至标题">¶</a></h2>
<p>对象实例的<code class="docutils literal notranslate"><span class="pre">hasOwnProperty</span></code>方法返回一个布尔值，用于判断某个属性定义在对象自身，还是定义在原型链上。</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nb">Date</span><span class="p">.</span><span class="nx">hasOwnProperty</span><span class="p">(</span><span class="s1">&#39;length&#39;</span><span class="p">)</span> <span class="c1">// true</span>
<span class="nb">Date</span><span class="p">.</span><span class="nx">hasOwnProperty</span><span class="p">(</span><span class="s1">&#39;toString&#39;</span><span class="p">)</span> <span class="c1">// false</span>
</pre></div>
</div>
<p>上面代码表明，<code class="docutils literal notranslate"><span class="pre">Date.length</span></code>（构造函数<code class="docutils literal notranslate"><span class="pre">Date</span></code>可以接受多少个参数）是<code class="docutils literal notranslate"><span class="pre">Date</span></code>自身的属性，<code class="docutils literal notranslate"><span class="pre">Date.toString</span></code>是继承的属性。</p>
<p>另外，<code class="docutils literal notranslate"><span class="pre">hasOwnProperty</span></code>方法是 JavaScript 之中唯一一个处理对象属性时，不会遍历原型链的方法。</p>
</div>
<div class="section" id="in-for-in">
<span id="in-for-in"></span><h2>in 运算符和 for...in 循环<a class="headerlink" href="#in-for-in" title="永久链接至标题">¶</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">in</span></code>运算符返回一个布尔值，表示一个对象是否具有某个属性。它不区分该属性是对象自身的属性，还是继承的属性。</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="s1">&#39;length&#39;</span> <span class="k">in</span> <span class="nb">Date</span> <span class="c1">// true</span>
<span class="s1">&#39;toString&#39;</span> <span class="k">in</span> <span class="nb">Date</span> <span class="c1">// true</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">in</span></code>运算符常用于检查一个属性是否存在。</p>
<p>获得对象的所有可遍历属性（不管是自身的还是继承的），可以使用<code class="docutils literal notranslate"><span class="pre">for...in</span></code>循环。</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">o1</span> <span class="o">=</span> <span class="p">{</span> <span class="nx">p1</span><span class="o">:</span> <span class="mi">123</span> <span class="p">};</span>

<span class="kd">var</span> <span class="nx">o2</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="nx">o1</span><span class="p">,</span> <span class="p">{</span>
  <span class="nx">p2</span><span class="o">:</span> <span class="p">{</span> <span class="nx">value</span><span class="o">:</span> <span class="s2">&quot;abc&quot;</span><span class="p">,</span> <span class="nx">enumerable</span><span class="o">:</span> <span class="kc">true</span> <span class="p">}</span>
<span class="p">});</span>

<span class="k">for</span> <span class="p">(</span><span class="nx">p</span> <span class="k">in</span> <span class="nx">o2</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">info</span><span class="p">(</span><span class="nx">p</span><span class="p">);</span>
<span class="p">}</span>
<span class="c1">// p2</span>
<span class="c1">// p1</span>
</pre></div>
</div>
<p>上面对象中，对象<code class="docutils literal notranslate"><span class="pre">o2</span></code>的<code class="docutils literal notranslate"><span class="pre">p2</span></code>属性是自身的，<code class="docutils literal notranslate"><span class="pre">p1</span></code>属性是继承的。这两个属性都会被<code class="docutils literal notranslate"><span class="pre">for...in</span></code>循环遍历。</p>
<p>为了在<code class="docutils literal notranslate"><span class="pre">for...in</span></code>循环中获得对象自身的属性，可以采用<code class="docutils literal notranslate"><span class="pre">hasOwnProperty</span></code>方法判断一下。</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="p">(</span> <span class="kd">var</span> <span class="nx">name</span> <span class="k">in</span> <span class="nx">object</span> <span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span> <span class="nx">object</span><span class="p">.</span><span class="nx">hasOwnProperty</span><span class="p">(</span><span class="nx">name</span><span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
    <span class="cm">/* loop code */</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>获得对象的所有属性（不管是自身的还是继承的，也不管是否可枚举），可以使用下面的函数。</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">function</span> <span class="nx">inheritedPropertyNames</span><span class="p">(</span><span class="nx">obj</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">props</span> <span class="o">=</span> <span class="p">{};</span>
  <span class="k">while</span><span class="p">(</span><span class="nx">obj</span><span class="p">)</span> <span class="p">{</span>
    <span class="nb">Object</span><span class="p">.</span><span class="nx">getOwnPropertyNames</span><span class="p">(</span><span class="nx">obj</span><span class="p">).</span><span class="nx">forEach</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">p</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">props</span><span class="p">[</span><span class="nx">p</span><span class="p">]</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
    <span class="p">});</span>
    <span class="nx">obj</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">getPrototypeOf</span><span class="p">(</span><span class="nx">obj</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="k">return</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">getOwnPropertyNames</span><span class="p">(</span><span class="nx">props</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p>上面代码依次获取<code class="docutils literal notranslate"><span class="pre">obj</span></code>对象的每一级原型对象“自身”的属性，从而获取<code class="docutils literal notranslate"><span class="pre">obj</span></code>对象的“所有”属性，不管是否可遍历。</p>
<p>下面是一个例子，列出<code class="docutils literal notranslate"><span class="pre">Date</span></code>对象的所有属性。</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nx">inheritedPropertyNames</span><span class="p">(</span><span class="nb">Date</span><span class="p">)</span>
<span class="c1">// [</span>
<span class="c1">//  &quot;caller&quot;,</span>
<span class="c1">//  &quot;constructor&quot;,</span>
<span class="c1">//  &quot;toString&quot;,</span>
<span class="c1">//  &quot;UTC&quot;,</span>
<span class="c1">//  ...</span>
<span class="c1">// ]</span>
</pre></div>
</div>
</div>
<div class="section" id="">
<span id="id2"></span><h2>对象的拷贝<a class="headerlink" href="#" title="永久链接至标题">¶</a></h2>
<p>如果要拷贝一个对象，需要做到下面两件事情。</p>
<ul class="simple">
<li>确保拷贝后的对象，与原对象具有同样的原型。</li>
<li>确保拷贝后的对象，与原对象具有同样的实例属性。</li>
</ul>
<p>下面就是根据上面两点，实现的对象拷贝函数。</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">function</span> <span class="nx">copyObject</span><span class="p">(</span><span class="nx">orig</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">copy</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span><span class="nb">Object</span><span class="p">.</span><span class="nx">getPrototypeOf</span><span class="p">(</span><span class="nx">orig</span><span class="p">));</span>
  <span class="nx">copyOwnPropertiesFrom</span><span class="p">(</span><span class="nx">copy</span><span class="p">,</span> <span class="nx">orig</span><span class="p">);</span>
  <span class="k">return</span> <span class="nx">copy</span><span class="p">;</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">copyOwnPropertiesFrom</span><span class="p">(</span><span class="nx">target</span><span class="p">,</span> <span class="nx">source</span><span class="p">)</span> <span class="p">{</span>
  <span class="nb">Object</span>
    <span class="p">.</span><span class="nx">getOwnPropertyNames</span><span class="p">(</span><span class="nx">source</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">propKey</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">desc</span> <span class="o">=</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">getOwnPropertyDescriptor</span><span class="p">(</span><span class="nx">source</span><span class="p">,</span> <span class="nx">propKey</span><span class="p">);</span>
      <span class="nb">Object</span><span class="p">.</span><span class="nx">defineProperty</span><span class="p">(</span><span class="nx">target</span><span class="p">,</span> <span class="nx">propKey</span><span class="p">,</span> <span class="nx">desc</span><span class="p">);</span>
    <span class="p">});</span>
  <span class="k">return</span> <span class="nx">target</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>另一种更简单的写法，是利用 ES2017 才引入标准的<code class="docutils literal notranslate"><span class="pre">Object.getOwnPropertyDescriptors</span></code>方法。</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kd">function</span> <span class="nx">copyObject</span><span class="p">(</span><span class="nx">orig</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="nb">Object</span><span class="p">.</span><span class="nx">create</span><span class="p">(</span>
    <span class="nb">Object</span><span class="p">.</span><span class="nx">getPrototypeOf</span><span class="p">(</span><span class="nx">orig</span><span class="p">),</span>
    <span class="nb">Object</span><span class="p">.</span><span class="nx">getOwnPropertyDescriptors</span><span class="p">(</span><span class="nx">orig</span><span class="p">)</span>
  <span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="">
<span id="id3"></span><h2>参考链接<a class="headerlink" href="#" title="永久链接至标题">¶</a></h2>
<ul class="simple">
<li>Dr. Axel Rauschmayer, <a class="reference external" href="http://www.2ality.com/2011/07/js-properties.html">JavaScript properties: inheritance and enumerability</a></li>
</ul>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="pattern.html" class="btn btn-neutral float-right" title="面向对象编程的模式" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="prototype.html" class="btn btn-neutral" title="prototype 对象" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, Vic Wang.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'beta',
            LANGUAGE:'zh',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="../_static/GA.js"></script>
      <script type="text/javascript" src="../_static/googleAnalysis.js"></script>

  

  <script type="text/javascript" src="../_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>