/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, {
/******/ 				configurable: false,
/******/ 				enumerable: true,
/******/ 				get: getter
/******/ 			});
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = "./src/index.js");
/******/ })
/************************************************************************/
/******/ ({

/***/ "./src/basicDraw.js":
/*!**************************!*\
  !*** ./src/basicDraw.js ***!
  \**************************/
/*! exports provided: background, fill, rectangle, circle, line, point, polygon, triangle, ellipse, image, text, font, play, pause */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"background\", function() { return background; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"fill\", function() { return fill; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"rectangle\", function() { return rectangle; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"circle\", function() { return circle; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"line\", function() { return line; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"point\", function() { return point; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"polygon\", function() { return polygon; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"triangle\", function() { return triangle; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"ellipse\", function() { return ellipse; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"image\", function() { return image; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"text\", function() { return text; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"font\", function() { return font; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"play\", function() { return play; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"pause\", function() { return pause; });\n/* harmony import */ var _canvas__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./canvas */ \"./src/canvas.js\");\n\r\n\r\nfunction background (style) { rectangle(0, 0, _canvas__WEBPACK_IMPORTED_MODULE_0__[\"canvas\"].width, _canvas__WEBPACK_IMPORTED_MODULE_0__[\"canvas\"].height, style) }\r\n\r\nlet isFill = true\r\n\r\nfunction fill (bool = true) { isFill = bool }\r\n\r\nfunction startDraw () {\r\n  _canvas__WEBPACK_IMPORTED_MODULE_0__[\"ctx\"].save()\r\n  _canvas__WEBPACK_IMPORTED_MODULE_0__[\"ctx\"].beginPath()\r\n}\r\n\r\nfunction endDraw (c) {\r\n  if (isFill) {\r\n    if (c) _canvas__WEBPACK_IMPORTED_MODULE_0__[\"ctx\"].fillStyle = c\r\n    _canvas__WEBPACK_IMPORTED_MODULE_0__[\"ctx\"].fill()\r\n  } else {\r\n    if (c) _canvas__WEBPACK_IMPORTED_MODULE_0__[\"ctx\"].strokeStyle = c\r\n    _canvas__WEBPACK_IMPORTED_MODULE_0__[\"ctx\"].stroke();\r\n  }\r\n  _canvas__WEBPACK_IMPORTED_MODULE_0__[\"ctx\"].restore()\r\n}\r\n\r\nfunction rectangle (x, y, w, h, c) {\r\n  startDraw()\r\n  _canvas__WEBPACK_IMPORTED_MODULE_0__[\"ctx\"].rect(x, y, w, h)\r\n  endDraw(c)\r\n}\r\n\r\nfunction circle (x, y, r, c) {\r\n  startDraw()\r\n  _canvas__WEBPACK_IMPORTED_MODULE_0__[\"ctx\"].arc(x, y, r, 0, 2 * Math.PI)\r\n  endDraw(c)\r\n}\r\n\r\n// line(x1, y1, x2, y2, *lineWidth, *color);\r\nfunction line (x1, y1, x2, y2, lW, c) {\r\n  _canvas__WEBPACK_IMPORTED_MODULE_0__[\"ctx\"].save()\r\n  if (typeof lW === 'string') c = lW;\r\n  else if (lW) _canvas__WEBPACK_IMPORTED_MODULE_0__[\"ctx\"].lineWidth = lW;\r\n  if (c) _canvas__WEBPACK_IMPORTED_MODULE_0__[\"ctx\"].strokeStyle = c;\r\n  _canvas__WEBPACK_IMPORTED_MODULE_0__[\"ctx\"].beginPath()\r\n  _canvas__WEBPACK_IMPORTED_MODULE_0__[\"ctx\"].moveTo(x1, y1)\r\n  _canvas__WEBPACK_IMPORTED_MODULE_0__[\"ctx\"].lineTo(x2, y2)\r\n  _canvas__WEBPACK_IMPORTED_MODULE_0__[\"ctx\"].stroke()\r\n  _canvas__WEBPACK_IMPORTED_MODULE_0__[\"ctx\"].restore()\r\n}\r\n\r\nfunction point (x, y, c) {\r\n  startDraw()\r\n  circle(x, y, 0.5)\r\n  endDraw(c)\r\n}\r\n\r\nfunction polygon () {\r\n  startDraw()\r\n  let len = arguments.length\r\n  _canvas__WEBPACK_IMPORTED_MODULE_0__[\"ctx\"].moveTo(arguments[0], arguments[1])\r\n  for (let i = 2; i < len - 1; i += 2) { _canvas__WEBPACK_IMPORTED_MODULE_0__[\"ctx\"].lineTo(arguments[i], arguments[i + 1]) }\r\n  _canvas__WEBPACK_IMPORTED_MODULE_0__[\"ctx\"].closePath()\r\n  let c = null\r\n  if (len % 2 === 1) { c = arguments[len - 1] }\r\n  endDraw(c)\r\n}\r\n\r\nfunction triangle (x1, y1, x2, y2, x3, y3, c) {\r\n  startDraw()\r\n  polygon(x1, y1, x2, y2, x3, y3)\r\n  endDraw(c)\r\n}\r\n\r\nfunction ellipse (x, y, rX, rY, c) {\r\n  startDraw()\r\n  _canvas__WEBPACK_IMPORTED_MODULE_0__[\"ctx\"].ellipse(x, y, rX, rY, 0, 0, Math.PI * 2)\r\n  endDraw(c)\r\n}\r\n\r\nconst globalImages = {}\r\n\r\nfunction image (src, x = 0, y = 0, w, h) {\r\n  let img\r\n  if (globalImages.hasOwnProperty(src)) {\r\n    img = globalImages[src]\r\n  } else {\r\n    img = new Image()\r\n    img.crossOrigin = 'anonymous'\r\n    img.src = src\r\n    globalImages[src] = img\r\n  }\r\n\r\n  img._x = x\r\n  img._y = y\r\n  img.w = w\r\n  img.h = h\r\n\r\n  if (img.complete) {\r\n    if (w && h) {\r\n      _canvas__WEBPACK_IMPORTED_MODULE_0__[\"ctx\"].drawImage(img, x, y, w, h)\r\n    } else {\r\n      _canvas__WEBPACK_IMPORTED_MODULE_0__[\"ctx\"].drawImage(img, x, y)\r\n    }\r\n  } else {\r\n    img.onload = function () {\r\n      if (this.w && this.h) {\r\n        _canvas__WEBPACK_IMPORTED_MODULE_0__[\"ctx\"].drawImage(this, this._x, this._y, this.w, this.h)\r\n      } else {\r\n        _canvas__WEBPACK_IMPORTED_MODULE_0__[\"ctx\"].drawImage(this, this._x, this._y)\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nfunction text (src, x = 0, y = 0, size = 20, c) {\r\n  _canvas__WEBPACK_IMPORTED_MODULE_0__[\"ctx\"].save()\r\n  _canvas__WEBPACK_IMPORTED_MODULE_0__[\"ctx\"].font = size + 'px ' + textFont\r\n  if (c) _canvas__WEBPACK_IMPORTED_MODULE_0__[\"ctx\"].fillStyle = c\r\n  _canvas__WEBPACK_IMPORTED_MODULE_0__[\"ctx\"].fillText(src, x, y)\r\n  _canvas__WEBPACK_IMPORTED_MODULE_0__[\"ctx\"].restore()\r\n}\r\n\r\nlet textFont = 'Arial'\r\nfunction font (font) { textFont = font }\r\n\r\nconst globalAudio = {}\r\nfunction play (src, loop) {\r\n  let m\r\n  if (globalAudio.hasOwnProperty(src)) {\r\n    m = globalAudio[src]\r\n    m.loop = loop\r\n    m.play()\r\n  } else {\r\n    m = new Audio()\r\n    m.src = src\r\n    if (loop) m.loop = loop\r\n    globalAudio[src] = m\r\n    m.oncanplaythrough = function () {\r\n      this.play()\r\n    }\r\n  }\r\n}\r\n\r\nfunction pause (src) {\r\n  if (globalAudio.hasOwnProperty(src)) {\r\n    let m = globalAudio[src]\r\n    m.pause()\r\n  }\r\n}\r\n\r\n\r\n\n\n//# sourceURL=webpack:///./src/basicDraw.js?");

/***/ }),

/***/ "./src/basicMethod.js":
/*!****************************!*\
  !*** ./src/basicMethod.js ***!
  \****************************/
/*! exports provided: Swing, Increase, Sine, Volatile, randint */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Swing\", function() { return Swing; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Increase\", function() { return Increase; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Sine\", function() { return Sine; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Volatile\", function() { return Volatile; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"randint\", function() { return randint; });\nclass Volatile {\r\n  constructor (func) {\r\n    this.func = func\r\n    this.startTime = new Date().getTime()\r\n  }\r\n\r\n  [Symbol.toPrimitive] (hint) {\r\n    let passedTime = (new Date().getTime() - this.startTime ) / 1000\r\n    return this.func(passedTime)\r\n  }\r\n}\r\n\r\nclass Swing {\r\n  constructor (min, max, cycleTime, loop=true) {\r\n    this.min = min\r\n    this.max = max\r\n    this.cycleTime = cycleTime\r\n    this.loop = loop\r\n    this.startTime = new Date().getTime()\r\n  }\r\n\r\n  [Symbol.toPrimitive] (hint) {\r\n    let passedTime = (new Date().getTime() - this.startTime) / 1000  // second\r\n    if(!this.loop && passedTime > this.cycleTime) return this.min;\r\n\r\n    passedTime %= this.cycleTime\r\n\r\n    if(passedTime > this.cycleTime / 2) \r\n      passedTime = this.cycleTime - passedTime\r\n\r\n    return (this.max - this.min) * 2 * passedTime / this.cycleTime + this.min\r\n  }\r\n}\r\n\r\nclass Increase {\r\n  constructor (min, max, cycleTime, loop=true) {\r\n    this.min = min\r\n    this.max = max\r\n    this.cycleTime = cycleTime\r\n    this.loop = loop\r\n    this.startTime = new Date().getTime()\r\n  }\r\n\r\n  [Symbol.toPrimitive] (hint) {\r\n    let passedTime = (new Date().getTime() - this.startTime) / 1000  // second\r\n    if(!this.loop && passedTime > this.cycleTime) return this.max;\r\n\r\n    passedTime %= this.cycleTime\r\n\r\n    return (this.max - this.min) * passedTime / this.cycleTime + this.min\r\n  }\r\n}\r\n\r\nclass Sine {\r\n  constructor (mean, wave, cycleTime, loop=true) {\r\n    this.mean = mean\r\n    this.wave = wave\r\n    this.cycleTime = cycleTime\r\n    this.loop = loop\r\n    this.startTime = new Date().getTime()\r\n  }\r\n\r\n  [Symbol.toPrimitive] (hint) {\r\n    let passedTime = (new Date().getTime() - this.startTime) / 1000  // second\r\n    if(!this.loop && passedTime > this.cycleTime) return this.mean;\r\n\r\n    passedTime %= this.cycleTime\r\n\r\n    return this.mean + this.wave * Math.sin(passedTime / this.cycleTime * Math.PI * 2)\r\n  }\r\n}\r\n\r\nfunction randint (a, b) {\r\n  a = Math.floor(a);\r\n  b = Math.floor(b);\r\n  return Math.floor(a + Math.random() * (b - a + 1))\r\n}\r\n\r\n\r\n\n\n//# sourceURL=webpack:///./src/basicMethod.js?");

/***/ }),

/***/ "./src/canvas.js":
/*!***********************!*\
  !*** ./src/canvas.js ***!
  \***********************/
/*! exports provided: canvas, ctx, p */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"canvas\", function() { return canvas; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"ctx\", function() { return ctx; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"p\", function() { return p; });\n/* harmony import */ var _util__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./util */ \"./src/util.js\");\n/* harmony import */ var _transform__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./transform */ \"./src/transform.js\");\n/* global text, line */\r\n\r\n\r\n\r\nlet canvas = document.createElement('canvas')\r\nlet p = document.createElement('p')\r\n\r\ndocument.body.appendChild(canvas)\r\ndocument.body.appendChild(p)\r\n\r\ncanvas.style.cssText = `\r\n  border: 1px solid #d3d3d3;\r\n\r\n  user-select:none; \r\n  -webkit-user-select:none;\r\n  -moz-user-select:none;\r\n  -ms-user-select:none;\r\n\r\n  -webkit-touch-callout:none;\r\n  touch-callout:none;`\r\n/*\r\n  position: absolute; \r\n  z-index: 1;\r\n*/\r\n\r\np.style.cssText = 'color: orange;'\r\n\r\nlet ctx = canvas.getContext('2d')\r\n\r\nctx._setTransform = function (transform) {\r\n  ctx.setTransform(1, 0, 0, 1, 0, 0)\r\n  ctx.transform(\r\n    transform.scaleX, transform.skewX,\r\n    transform.skewY, transform.scaleY,\r\n    transform.translateX, transform.translateY\r\n  )\r\n  ctx.rotate(transform.degree)\r\n}\r\n\r\ncanvas.resize = function (width, height) {\r\n  canvas.width = width || 450 // borders size\r\n  canvas.height = height || 600 // p, height\r\n  ctx.fillStyle = ctx.strokeStyle = 'orange'\r\n  ctx.textBaseline = 'top'\r\n}\r\n\r\ncanvas.resize()\r\ncanvas.transform = new _transform__WEBPACK_IMPORTED_MODULE_1__[\"default\"]()\r\n\r\ncanvas.scale = function (x, y) {\r\n  canvas.transform.scale(x, y)\r\n  ctx._setTransform(canvas.transform)\r\n  // thick the line width\r\n  ctx.lineWidth = 2 / (x + y)\r\n}\r\n\r\ncanvas.rotate = function (degree) {\r\n  canvas.transform.rotate(degree)\r\n  ctx._setTransform(canvas.transform)\r\n}\r\n\r\ncanvas._translate = function (x, y) {\r\n  canvas.transform.translate(x, y)\r\n  ctx._setTransform(canvas.transform)\r\n}\r\n\r\ncanvas.clear = function () {\r\n  _util__WEBPACK_IMPORTED_MODULE_0__[\"clickShapes\"].clear()\r\n  ctx.save()\r\n  ctx.setTransform(1, 0, 0, 1, 0, 0)\r\n  ctx.clearRect(0, 0, canvas.width, canvas.height)\r\n  ctx.restore()\r\n}\r\n\r\ncanvas.showAxis = function () {\r\n  ctx.save()\r\n  ctx.strokeStyle = 'black'\r\n\r\n  let gap = 10\r\n  let lw = 0\r\n  if (canvas.transform.scaleX >= 10 && canvas.transform.scaleY >= 10) gap = 1\r\n\r\n  let w = canvas.width / Math.abs(canvas.transform.scaleX)\r\n  let h = canvas.height / Math.abs(canvas.transform.scaleY)\r\n  for (let i = 0; i < w; i += gap) {\r\n    if (i % (10 * gap) === 0) {\r\n      text(i.toString(), i, 0, gap * 1.5)\r\n      text((-i).toString(), -i, 0, gap * 1.5)\r\n      lw = 0.04 * gap\r\n    } else lw = 0.01 * gap\r\n    line(i, -h, i, h, lw)\r\n    line(-i, -h, -i, h, lw)\r\n  }\r\n\r\n  for (let i = 0; i < h; i += gap) {\r\n    if (i % (10 * gap) === 0) {\r\n      text(i.toString(), 0, i, gap * 1.5)\r\n      text((-i).toString(), 0, -i, gap * 1.5)\r\n      lw = 0.03 * gap\r\n    } else lw = 0.01 * gap\r\n    line(-w, i, w, i, lw)\r\n    line(-w, -i, w, -i, lw)\r\n  }\r\n  ctx.restore()\r\n}\r\n\r\nctx.update = function (shape) {\r\n  if (shape.fillStyle) ctx.fillStyle = shape.fillStyle\r\n  if (shape.strokeStyle) ctx.strokeStyle = shape.strokeStyle\r\n\r\n  if (shape.shadowColor) ctx.shadowColor = shape.shadowColor\r\n  if (shape.shadowBlur !== undefined) ctx.shadowBlur = shape.shadowBlur\r\n  if (shape.shadowOffsetX !== undefined) ctx.shadowOffsetX = shape.shadowOffsetX\r\n  if (shape.shadowOffsetY !== undefined) ctx.shadowOffsetY = shape.shadowOffsetY\r\n\r\n  if (shape.lineCap) ctx.lineCap = shape.lineCap\r\n  if (shape.lineJoin) ctx.lineJoin = shape.lineJoin\r\n  if (shape.lineWidth !== undefined) ctx.lineWidth = shape.lineWidth\r\n  if (shape.miterLimit !== undefined) ctx.miterLimit = shape.miterLimit\r\n\r\n  if (shape.globalAlpha !== undefined) ctx.globalAlpha = shape.globalAlpha\r\n  if (shape.globalCompositeOperation) ctx.globalCompositeOperation = shape.globalCompositeOperation\r\n\r\n  if (shape.lineDash) ctx.setLineDash(shape.lineDash)\r\n  if (shape.textAlign) ctx.textAlign = shape.textAlign\r\n  if (shape.textBaseline) ctx.textBaseline = shape.textBaseline\r\n\r\n  if (shape.transform.transformed()) {\r\n    shape.updateAnchor();\r\n    ctx.updateTransform(shape.transform)\r\n  }\r\n}\r\n\r\nctx.updateTransform = function (transform) {\r\n  ctx.translate(transform.anchorX, transform.anchorY)\r\n\r\n  ctx.rotate(transform.degree)\r\n  ctx.transform(\r\n    transform.scaleX, transform.skewX,\r\n    transform.skewY, transform.scaleY,\r\n    transform.translateX, transform.translateY\r\n  )\r\n\r\n  ctx.translate(-transform.anchorX, -transform.anchorY)\r\n}\r\n\r\ncanvas.getRealPoint = function (p) {\r\n  if (!this.transform.transformed()) { return p }\r\n  let t = this.transform\r\n\r\n  let x = p.x\r\n  let y = p.y\r\n  let x0 = x\r\n  let y0 = y\r\n\r\n  x = (x0 - t.translateX) / t.scaleX\r\n  y = (y0 - t.translateY) / t.scaleY\r\n\r\n  let degree = t.degree\r\n  let sin = Math.sin(-degree)\r\n  let cos = Math.cos(-degree)\r\n\r\n  x0 = x\r\n  y0 = y\r\n  x = x0 * cos - y0 * sin\r\n  y = y0 * cos + x0 * sin\r\n\r\n  return {x, y}\r\n}\r\n\r\n\r\n\n\n//# sourceURL=webpack:///./src/canvas.js?");

/***/ }),

/***/ "./src/clone.js":
/*!**********************!*\
  !*** ./src/clone.js ***!
  \**********************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("var clone = (function() {\r\n'use strict';\r\n\r\nfunction _instanceof(obj, type) {\r\n  return type != null && obj instanceof type;\r\n}\r\n\r\nvar nativeMap;\r\ntry {\r\n  nativeMap = Map;\r\n} catch(_) {\r\n  // maybe a reference error because no `Map`. Give it a dummy value that no\r\n  // value will ever be an instanceof.\r\n  nativeMap = function() {};\r\n}\r\n\r\nvar nativeSet;\r\ntry {\r\n  nativeSet = Set;\r\n} catch(_) {\r\n  nativeSet = function() {};\r\n}\r\n\r\nvar nativePromise;\r\ntry {\r\n  nativePromise = Promise;\r\n} catch(_) {\r\n  nativePromise = function() {};\r\n}\r\n\r\n/**\r\n * Clones (copies) an Object using deep copying.\r\n *\r\n * This function supports circular references by default, but if you are certain\r\n * there are no circular references in your object, you can save some CPU time\r\n * by calling clone(obj, false).\r\n *\r\n * Caution: if `circular` is false and `parent` contains circular references,\r\n * your program may enter an infinite loop and crash.\r\n *\r\n * @param `parent` - the object to be cloned\r\n * @param `circular` - set to true if the object to be cloned may contain\r\n *    circular references. (optional - true by default)\r\n * @param `depth` - set to a number if the object is only to be cloned to\r\n *    a particular depth. (optional - defaults to Infinity)\r\n * @param `prototype` - sets the prototype to be used when cloning an object.\r\n *    (optional - defaults to parent prototype).\r\n * @param `includeNonEnumerable` - set to true if the non-enumerable properties\r\n *    should be cloned as well. Non-enumerable properties on the prototype\r\n *    chain will be ignored. (optional - false by default)\r\n*/\r\nfunction clone(parent, circular, depth, prototype, includeNonEnumerable) {\r\n  if (typeof circular === 'object') {\r\n    depth = circular.depth;\r\n    prototype = circular.prototype;\r\n    includeNonEnumerable = circular.includeNonEnumerable;\r\n    circular = circular.circular;\r\n  }\r\n  // maintain two arrays for circular references, where corresponding parents\r\n  // and children have the same index\r\n  var allParents = [];\r\n  var allChildren = [];\r\n\r\n  var useBuffer = typeof Buffer != 'undefined';\r\n\r\n  if (typeof circular == 'undefined')\r\n    circular = true;\r\n\r\n  if (typeof depth == 'undefined')\r\n    depth = Infinity;\r\n\r\n  // recurse this function so we don't reset allParents and allChildren\r\n  function _clone(parent, depth) {\r\n    // cloning null always returns null\r\n    if (parent === null)\r\n      return null;\r\n\r\n    if (depth === 0)\r\n      return parent;\r\n\r\n    var child;\r\n    var proto;\r\n    if (typeof parent != 'object') {\r\n      return parent;\r\n    }\r\n\r\n    if (_instanceof(parent, nativeMap)) {\r\n      child = new nativeMap();\r\n    } else if (_instanceof(parent, nativeSet)) {\r\n      child = new nativeSet();\r\n    } else if (_instanceof(parent, Image)) {\r\n      child = new Image();\r\n      child.crossOrigin = 'anonymous'\r\n      child.src = parent.src;\r\n      return child;\r\n    } else if (_instanceof(parent, nativePromise)) {\r\n      child = new nativePromise(function (resolve, reject) {\r\n        parent.then(function(value) {\r\n          resolve(_clone(value, depth - 1));\r\n        }, function(err) {\r\n          reject(_clone(err, depth - 1));\r\n        });\r\n      });\r\n    } else if (clone.__isArray(parent)) {\r\n      child = [];\r\n    } else if (clone.__isRegExp(parent)) {\r\n      child = new RegExp(parent.source, __getRegExpFlags(parent));\r\n      if (parent.lastIndex) child.lastIndex = parent.lastIndex;\r\n    } else if (clone.__isDate(parent)) {\r\n      child = new Date(parent.getTime());\r\n    } else if (useBuffer && Buffer.isBuffer(parent)) {\r\n      child = new Buffer(parent.length);\r\n      parent.copy(child);\r\n      return child;\r\n    } else if (_instanceof(parent, Error)) {\r\n      child = Object.create(parent);\r\n    } else {\r\n      if (typeof prototype == 'undefined') {\r\n        proto = Object.getPrototypeOf(parent);\r\n        child = Object.create(proto);\r\n      }\r\n      else {\r\n        child = Object.create(prototype);\r\n        proto = prototype;\r\n      }\r\n    }\r\n\r\n    if (circular) {\r\n      var index = allParents.indexOf(parent);\r\n\r\n      if (index != -1) {\r\n        return allChildren[index];\r\n      }\r\n      allParents.push(parent);\r\n      allChildren.push(child);\r\n    }\r\n\r\n    if (_instanceof(parent, nativeMap)) {\r\n      parent.forEach(function(value, key) {\r\n        var keyChild = _clone(key, depth - 1);\r\n        var valueChild = _clone(value, depth - 1);\r\n        child.set(keyChild, valueChild);\r\n      });\r\n    }\r\n    if (_instanceof(parent, nativeSet)) {\r\n      parent.forEach(function(value) {\r\n        var entryChild = _clone(value, depth - 1);\r\n        child.add(entryChild);\r\n      });\r\n    }\r\n\r\n    for (var i in parent) {\r\n      var attrs;\r\n      if (proto) {\r\n        attrs = Object.getOwnPropertyDescriptor(proto, i);\r\n      }\r\n\r\n      if (attrs && attrs.set == null) {\r\n        continue;\r\n      }\r\n      child[i] = _clone(parent[i], depth - 1);\r\n    }\r\n\r\n    if (Object.getOwnPropertySymbols) {\r\n      var symbols = Object.getOwnPropertySymbols(parent);\r\n      for (var i = 0; i < symbols.length; i++) {\r\n        // Don't need to worry about cloning a symbol because it is a primitive,\r\n        // like a number or string.\r\n        var symbol = symbols[i];\r\n        var descriptor = Object.getOwnPropertyDescriptor(parent, symbol);\r\n        if (descriptor && !descriptor.enumerable && !includeNonEnumerable) {\r\n          continue;\r\n        }\r\n        child[symbol] = _clone(parent[symbol], depth - 1);\r\n        if (!descriptor.enumerable) {\r\n          Object.defineProperty(child, symbol, {\r\n            enumerable: false\r\n          });\r\n        }\r\n      }\r\n    }\r\n\r\n    if (includeNonEnumerable) {\r\n      var allPropertyNames = Object.getOwnPropertyNames(parent);\r\n      for (var i = 0; i < allPropertyNames.length; i++) {\r\n        var propertyName = allPropertyNames[i];\r\n        var descriptor = Object.getOwnPropertyDescriptor(parent, propertyName);\r\n        if (descriptor && descriptor.enumerable) {\r\n          continue;\r\n        }\r\n        child[propertyName] = _clone(parent[propertyName], depth - 1);\r\n        Object.defineProperty(child, propertyName, {\r\n          enumerable: false\r\n        });\r\n      }\r\n    }\r\n\r\n    return child;\r\n  }\r\n\r\n  return _clone(parent, depth);\r\n}\r\n\r\n/**\r\n * Simple flat clone using prototype, accepts only objects, usefull for property\r\n * override on FLAT configuration object (no nested props).\r\n *\r\n * USE WITH CAUTION! This may not behave as you wish if you do not know how this\r\n * works.\r\n */\r\nclone.clonePrototype = function clonePrototype(parent) {\r\n  if (parent === null)\r\n    return null;\r\n\r\n  var c = function () {};\r\n  c.prototype = parent;\r\n  return new c();\r\n};\r\n\r\n// private utility functions\r\n\r\nfunction __objToStr(o) {\r\n  return Object.prototype.toString.call(o);\r\n}\r\nclone.__objToStr = __objToStr;\r\n\r\nfunction __isDate(o) {\r\n  return typeof o === 'object' && __objToStr(o) === '[object Date]';\r\n}\r\nclone.__isDate = __isDate;\r\n\r\nfunction __isArray(o) {\r\n  return typeof o === 'object' && __objToStr(o) === '[object Array]';\r\n}\r\nclone.__isArray = __isArray;\r\n\r\nfunction __isRegExp(o) {\r\n  return typeof o === 'object' && __objToStr(o) === '[object RegExp]';\r\n}\r\nclone.__isRegExp = __isRegExp;\r\n\r\nfunction __getRegExpFlags(re) {\r\n  var flags = '';\r\n  if (re.global) flags += 'g';\r\n  if (re.ignoreCase) flags += 'i';\r\n  if (re.multiline) flags += 'm';\r\n  return flags;\r\n}\r\nclone.__getRegExpFlags = __getRegExpFlags;\r\n\r\nreturn clone;\r\n})();\r\n\r\nif (typeof module === 'object' && module.exports) {\r\n  module.exports = clone;\r\n}\r\n\n\n//# sourceURL=webpack:///./src/clone.js?");

/***/ }),

/***/ "./src/collision.js":
/*!**************************!*\
  !*** ./src/collision.js ***!
  \**************************/
/*! exports provided: collide, pointInShape */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"collide\", function() { return collide; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"pointInShape\", function() { return pointInShape; });\n// detect collision using shadows\r\n// p: Point, {x, y}\r\n// ps: Points, Array\r\n// rect: {minX, maxX, minY, maxY}\r\n// import { ctx } from './canvas'\r\nlet canvas = document.createElement('canvas')\r\nlet ctx = canvas.getContext('2d')\r\n\r\nctx.drawPathByPoints = function (ps) {\r\n  ctx.beginPath()\r\n  ctx.moveTo(ps[0].x, ps[0].y)\r\n\r\n  for (let i = 1; i < ps.length; i++) { ctx.lineTo(ps[i].x, ps[i].y) }\r\n\r\n  ctx.closePath()\r\n}\r\n\r\nfunction collide (shape1, shape2) {\r\n  const ps1 = shape1.points\r\n  const ps2 = shape2.points\r\n\r\n  if (ps1.length < 2) return false\r\n  if (ps2.length < 2) return false\r\n\r\n  // quick check start\r\n  let r1 = {}\r\n  let r2 = {}\r\n  r1 = getRectShape(ps1)\r\n  r2 = getRectShape(ps2)\r\n\r\n  if (r1.minX > r2.maxX || r1.minY > r2.maxY || r2.minX > r1.maxX || r2.minY > r1.maxY) {\r\n    return false\r\n  }\r\n  // quick check end\r\n\r\n  // possible rect\r\n  let collideRect = getCollideRect(r1, r2)\r\n\r\n  // if point inside shapes, return point\r\n  ctx.drawPathByPoints(ps2)\r\n  for (let i = 0; i < ps1.length; i++) {\r\n    let p = ps1[i]\r\n    if (pointInRect(p, collideRect) && ctx.isPointInPath(p.x, p.y)) { return p }\r\n  }\r\n\r\n  ctx.drawPathByPoints(ps1)\r\n  for (let i = 0; i < ps2.length; i++) {\r\n    let p = ps2[i]\r\n    if (pointInRect(p, collideRect) && ctx.isPointInPath(p.x, p.y)) { return p }\r\n  }\r\n  // points check end\r\n\r\n  // lines check\r\n  for (let i = 0; i < ps1.length - 1; i++) { // bcz we had checked the points, ignore the last line\r\n    let p1 = ps1[i]\r\n    let p2 = ps1[i + 1]\r\n    for (let j = 0; j < ps2.length - 1; j++) {\r\n      let p3 = ps2[j]\r\n      let p4 = ps2[j + 1]\r\n\r\n      let p = lineCollideLine(p1, p2, p3, p4)\r\n      if (p) return p\r\n    }\r\n  }\r\n\r\n  return false\r\n}\r\n\r\nfunction getCollideRect (r1, r2) {\r\n  return {\r\n    minX: r1.minX > r2.minX ? r1.minX : r2.minX,\r\n    minY: r1.minY > r2.minY ? r1.minY : r2.minY,\r\n    maxX: r1.maxX < r2.maxX ? r1.maxX : r2.maxX,\r\n    maxY: r1.maxY < r2.maxY ? r1.maxY : r2.maxY\r\n  }\r\n}\r\n\r\nfunction lineCollideLine (p1, p2, p3, p4) {\r\n  let x1 = p1.x\r\n  let x2 = p2.x\r\n  let x3 = p3.x\r\n  let x4 = p4.x\r\n\r\n  let y1 = p1.y\r\n  let y2 = p2.y\r\n  let y3 = p3.y\r\n  let y4 = p4.y\r\n\r\n  // quick check\r\n  if (Math.min(x1, x2) > Math.max(x3, x4) ||\r\n      Math.min(y1, y2) > Math.max(y3, y4) ||\r\n      Math.max(x1, x2) < Math.min(x3, x4) ||\r\n      Math.max(y1, y2) < Math.min(y3, y4)) { return false }\r\n\r\n  // same slope rate\r\n  if ((y1 - y2) * (x3 - x4) === (x1 - x2) * (y3 - y4)) { return false }\r\n\r\n  if (cross(p3, p2, p3, p4) * cross(p3, p4, p3, p1) < 0 ||\r\n    cross(p1, p4, p1, p2) * cross(p1, p2, p1, p3) < 0) { return false }\r\n\r\n  // get collide point\r\n  let b1 = (y2 - y1) * x1 + (x1 - x2) * y1\r\n  let b2 = (y4 - y3) * x3 + (x3 - x4) * y3\r\n  let D = (x2 - x1) * (y4 - y3) - (x4 - x3) * (y2 - y1)\r\n  let D1 = b2 * (x2 - x1) - b1 * (x4 - x3)\r\n  let D2 = b2 * (y2 - y1) - b1 * (y4 - y3)\r\n\r\n  return {\r\n    x: D1 / D,\r\n    y: D2 / D\r\n  }\r\n}\r\n\r\nfunction cross (p1, p2, p3, p4) {\r\n  return (p2.x - p1.x) * (p4.y - p3.y) - (p2.y - p1.y) * (p4.x - p3.x)\r\n}\r\n\r\nfunction max (a, b) { return Math.max(a, b) }\r\nfunction min (a, b) { return Math.min(a, b) }\r\n\r\nfunction getRectShape (ps) {\r\n  let xs = ps.map(p => p.x)\r\n  let ys = ps.map(p => p.y)\r\n\r\n  return {\r\n    minX: xs.reduce(min),\r\n    maxX: xs.reduce(max),\r\n    minY: ys.reduce(min),\r\n    maxY: ys.reduce(max)\r\n  }\r\n}\r\n\r\nfunction pointInRect (p, r) {\r\n  return r.minX <= p.x && p.x <= r.maxX &&\r\n    r.minY <= p.y && p.y <= r.maxY\r\n}\r\n\r\nfunction pointInShape (p, shape) {\r\n  let ps = shape.points\r\n  if (ps.length < 3) return false\r\n\r\n  let rect = getRectShape(ps)\r\n  if (!pointInRect(p, rect)) { return false }\r\n\r\n  ctx.drawPathByPoints(ps)\r\n  if (ctx.isPointInPath(p.x, p.y)) { return p }\r\n\r\n  return false\r\n}\r\n\r\n\r\n\n\n//# sourceURL=webpack:///./src/collision.js?");

/***/ }),

/***/ "./src/colors.js":
/*!***********************!*\
  !*** ./src/colors.js ***!
  \***********************/
/*! exports provided: RGB, RGBA, HSL, HSLA */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"RGB\", function() { return RGB; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"RGBA\", function() { return RGBA; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"HSL\", function() { return HSL; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"HSLA\", function() { return HSLA; });\nfunction RGB (r, g, b) {\r\n  r = Math.floor(r)\r\n  g = Math.floor(g)\r\n  b = Math.floor(b)\r\n  return 'rgb(' + r + ', ' + g + ', ' + b + ')' \r\n}\r\n\r\nfunction RGBA (r, g, b, a) {\r\n  r = Math.floor(r)\r\n  g = Math.floor(g)\r\n  b = Math.floor(b)\r\n  return 'rgba(' + r + ', ' + g + ', ' + b + ', ' + a + ')' \r\n}\r\n\r\nfunction HSL (h, s, l) {\r\n  h = Math.floor(h)\r\n  return `hsl(${h}, ${s * 100}%, ${l * 100}%)`\r\n}\r\n\r\nfunction HSLA (h, s, l, a) {\r\n  h = Math.floor(h)\r\n  return `hsla(${h}, ${s * 100}%, ${l * 100}%, ${a})`\r\n}\r\n\r\n\r\n\n\n//# sourceURL=webpack:///./src/colors.js?");

/***/ }),

/***/ "./src/index.js":
/*!**********************!*\
  !*** ./src/index.js ***!
  \**********************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _canvas__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./canvas */ \"./src/canvas.js\");\n/* harmony import */ var _keys__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./keys */ \"./src/keys.js\");\n/* harmony import */ var _mouse__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./mouse */ \"./src/mouse.js\");\n/* harmony import */ var _shapes__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./shapes */ \"./src/shapes.js\");\n/* harmony import */ var _util__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./util */ \"./src/util.js\");\n/* harmony import */ var _resource__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./resource */ \"./src/resource.js\");\n/* harmony import */ var _colors__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./colors */ \"./src/colors.js\");\n/* harmony import */ var _basicMethod__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./basicMethod */ \"./src/basicMethod.js\");\n/* harmony import */ var _basicDraw__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./basicDraw */ \"./src/basicDraw.js\");\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n// canvas\r\nwindow.canvas = _canvas__WEBPACK_IMPORTED_MODULE_0__[\"canvas\"]\r\nwindow.ctx = _canvas__WEBPACK_IMPORTED_MODULE_0__[\"ctx\"]\r\n\r\n// shapes\r\nwindow.Line = _shapes__WEBPACK_IMPORTED_MODULE_3__[\"Line\"]\r\nwindow.Rectangle = _shapes__WEBPACK_IMPORTED_MODULE_3__[\"Rectangle\"]\r\nwindow.Polygon = _shapes__WEBPACK_IMPORTED_MODULE_3__[\"Polygon\"]\r\nwindow.Triangle = _shapes__WEBPACK_IMPORTED_MODULE_3__[\"Triangle\"]\r\nwindow.Circle = _shapes__WEBPACK_IMPORTED_MODULE_3__[\"Circle\"]\r\nwindow.Text = _shapes__WEBPACK_IMPORTED_MODULE_3__[\"Text\"]\r\nwindow.Sprite = _shapes__WEBPACK_IMPORTED_MODULE_3__[\"Sprite\"]\r\nwindow.Animation = _shapes__WEBPACK_IMPORTED_MODULE_3__[\"Animation\"]\r\nwindow.Point = _shapes__WEBPACK_IMPORTED_MODULE_3__[\"Point\"]\r\nwindow.Ellipse = _shapes__WEBPACK_IMPORTED_MODULE_3__[\"Ellipse\"]\r\n\r\n// events\r\nwindow.Key = _keys__WEBPACK_IMPORTED_MODULE_1__[\"Key\"]\r\nwindow.Mouse = _mouse__WEBPACK_IMPORTED_MODULE_2__[\"Mouse\"]\r\n\r\n// rss\r\nwindow.nextFrame = _util__WEBPACK_IMPORTED_MODULE_4__[\"nextFrame\"]\r\nwindow.loadRssAndRun = _resource__WEBPACK_IMPORTED_MODULE_5__[\"loadRssAndRun\"]\r\nwindow.run = _util__WEBPACK_IMPORTED_MODULE_4__[\"run\"]\r\nwindow.stop = _util__WEBPACK_IMPORTED_MODULE_4__[\"stop\"]\r\n\r\n// colors\r\nwindow.RGB = _colors__WEBPACK_IMPORTED_MODULE_6__[\"RGB\"]\r\nwindow.RGBA = _colors__WEBPACK_IMPORTED_MODULE_6__[\"RGBA\"]\r\nwindow.HSL = _colors__WEBPACK_IMPORTED_MODULE_6__[\"HSL\"]\r\nwindow.HSLA = _colors__WEBPACK_IMPORTED_MODULE_6__[\"HSLA\"]\r\n\r\n// basic method\r\nwindow.Swing = _basicMethod__WEBPACK_IMPORTED_MODULE_7__[\"Swing\"]\r\nwindow.Increase = _basicMethod__WEBPACK_IMPORTED_MODULE_7__[\"Increase\"]\r\nwindow.Sine = _basicMethod__WEBPACK_IMPORTED_MODULE_7__[\"Sine\"]\r\nwindow.Volatile = _basicMethod__WEBPACK_IMPORTED_MODULE_7__[\"Volatile\"]\r\nwindow.randint = _basicMethod__WEBPACK_IMPORTED_MODULE_7__[\"randint\"]\r\n\r\n// basic draw method\r\nwindow.background = _basicDraw__WEBPACK_IMPORTED_MODULE_8__[\"background\"]\r\nwindow.fill = _basicDraw__WEBPACK_IMPORTED_MODULE_8__[\"fill\"]\r\nwindow.rectangle = _basicDraw__WEBPACK_IMPORTED_MODULE_8__[\"rectangle\"]\r\nwindow.circle = _basicDraw__WEBPACK_IMPORTED_MODULE_8__[\"circle\"]\r\nwindow.line = _basicDraw__WEBPACK_IMPORTED_MODULE_8__[\"line\"]\r\nwindow.point = _basicDraw__WEBPACK_IMPORTED_MODULE_8__[\"point\"]\r\nwindow.polygon = _basicDraw__WEBPACK_IMPORTED_MODULE_8__[\"polygon\"]\r\nwindow.triangle = _basicDraw__WEBPACK_IMPORTED_MODULE_8__[\"triangle\"]\r\nwindow.ellipse = _basicDraw__WEBPACK_IMPORTED_MODULE_8__[\"ellipse\"]\r\nwindow.image = _basicDraw__WEBPACK_IMPORTED_MODULE_8__[\"image\"]\r\nwindow.text = _basicDraw__WEBPACK_IMPORTED_MODULE_8__[\"text\"]\r\nwindow.font = _basicDraw__WEBPACK_IMPORTED_MODULE_8__[\"font\"]\r\nwindow.play = _basicDraw__WEBPACK_IMPORTED_MODULE_8__[\"play\"]\r\nwindow.pause = _basicDraw__WEBPACK_IMPORTED_MODULE_8__[\"pause\"]\r\n\r\nwindow.noStroke = function(){ console.log(\"'noStroke' is deprecated, use 'fill(boolen)' instead\");};\r\nwindow.canvas.preventDefaultEvent = function(){console.log(\"'canvas.preventDefaultEvent' is deprecated, you don't need it any more\");};\r\nwindow.nextFrame = function () { console.log(\"'nextFrame' is deprecated, use 'run(function)' instead\");};\r\nwindow.playSound = function () { console.log(\"'playSound' is deprecated, use 'play' instead\"); }\r\n\n\n//# sourceURL=webpack:///./src/index.js?");

/***/ }),

/***/ "./src/keys.js":
/*!*********************!*\
  !*** ./src/keys.js ***!
  \*********************/
/*! exports provided: Key */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Key\", function() { return Key; });\nlet Key = {}\r\n\r\nconst keyboard = 'abcdefghijklmnopqrstuvwxyz1234567890!@#$%^&*()_+-=,./<>?|\\\\;:\\'\"'\r\nconst keyboard2 = ['ArrowUp', 'ArrowDown', 'ArrowLeft', 'ArrowRight', 'Enter', 'Escape', ' ', 'Tab', 'Shift', 'Control', 'Alt', 'Backspace']\r\nconst noPressKeys = ['ArrowUp', 'ArrowDown', 'ArrowLeft', 'ArrowRight', 'Escape', 'Tab', 'Shift', 'Control', 'Alt', 'Backspace']\r\n\r\nfor (let i = 0; i < keyboard.length; i++) {\r\n  Key[keyboard[i]] = {}\r\n}\r\n\r\nfor (let i = 0; i < keyboard2.length; i++) {\r\n  Key[keyboard2[i]] = {}\r\n}\r\n\r\ndocument.onkeyup = function (e) {\r\n  let key = Key[e.key]\r\n  if (key && key.up) {\r\n    key.up()\r\n  }\r\n}\r\n\r\ndocument.onkeydown = function (e) {\r\n  let key = Key[e.key]\r\n  if (key && key.down) { key.down() }\r\n  if (noPressKeys.includes(e.key) && key.press) {\r\n    key.press()\r\n  }\r\n}\r\n\r\n// keyboard2 will not file key press event\r\ndocument.onkeypress = function (e) {\r\n  let key = Key[e.key]\r\n  if (key && key.press) { key.press() }\r\n}\r\n\r\n\r\n\n\n//# sourceURL=webpack:///./src/keys.js?");

/***/ }),

/***/ "./src/mouse.js":
/*!**********************!*\
  !*** ./src/mouse.js ***!
  \**********************/
/*! exports provided: Mouse */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Mouse\", function() { return Mouse; });\n/* harmony import */ var _canvas__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./canvas */ \"./src/canvas.js\");\n/* harmony import */ var _keys__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./keys */ \"./src/keys.js\");\n/* harmony import */ var _util__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./util */ \"./src/util.js\");\n\r\n\r\n\r\n\r\nlet Mouse = { x: 0, y: 0 }\r\n\r\nlet TouchStart = {}\r\nTouchStart.init = function () {\r\n  TouchStart.x = Mouse.x\r\n  TouchStart.y = Mouse.y\r\n}\r\n\r\nfunction windowToCanvas (canvas, x, y) {\r\n  let box = canvas.getBoundingClientRect()\r\n\r\n  x -= box.left * (canvas.width / box.width)\r\n  y -= box.top * (canvas.height / box.height)\r\n\r\n  return canvas.getRealPoint({x, y})\r\n}\r\n\r\nfunction updateEvent (e) {\r\n  // e.preventDefault();\r\n  // update e if it is on phone\r\n  if (e.touches) e = e.touches.item(0)\r\n\r\n  let point = windowToCanvas(_canvas__WEBPACK_IMPORTED_MODULE_0__[\"canvas\"], e.clientX, e.clientY)\r\n  Mouse.x = Math.floor(point.x)\r\n  Mouse.y = Math.floor(point.y)\r\n\r\n  _canvas__WEBPACK_IMPORTED_MODULE_0__[\"p\"].innerHTML = `x: ${Mouse.x}, y: ${Mouse.y}`\r\n}\r\n\r\n_canvas__WEBPACK_IMPORTED_MODULE_0__[\"canvas\"].onmousedown = function (e) {\r\n  updateEvent(e)\r\n  if (Mouse.down) Mouse.down()\r\n\r\n  // handle events of all shapes, LIFO\r\n  // IMPORTANT\r\n  const array = Array.from(_util__WEBPACK_IMPORTED_MODULE_2__[\"clickShapes\"])\r\n  let i = array.length\r\n  while (i--) {\r\n    let shape = array[i]\r\n    if (shape.touched() && shape.click) {\r\n      shape.click()\r\n      break\r\n    }\r\n  }\r\n}\r\n\r\n_canvas__WEBPACK_IMPORTED_MODULE_0__[\"canvas\"].ontouchstart = function (e) {\r\n  _canvas__WEBPACK_IMPORTED_MODULE_0__[\"canvas\"].onmousedown(e)\r\n  TouchStart.init()\r\n}\r\n\r\n_canvas__WEBPACK_IMPORTED_MODULE_0__[\"canvas\"].onmousemove = function (e) {\r\n  updateEvent(e)\r\n  if (Mouse.move) Mouse.move()\r\n}\r\n\r\n_canvas__WEBPACK_IMPORTED_MODULE_0__[\"canvas\"].ontouchmove = function (e) {\r\n  _canvas__WEBPACK_IMPORTED_MODULE_0__[\"canvas\"].onmousemove(e)\r\n  if (Mouse.x - TouchStart.x > 50 && _keys__WEBPACK_IMPORTED_MODULE_1__[\"Key\"].ArrowRight.down) {\r\n    _keys__WEBPACK_IMPORTED_MODULE_1__[\"Key\"].ArrowRight.down()\r\n    TouchStart.init()\r\n  } else if (TouchStart.x - Mouse.x > 50 && _keys__WEBPACK_IMPORTED_MODULE_1__[\"Key\"].ArrowLeft.down) {\r\n    _keys__WEBPACK_IMPORTED_MODULE_1__[\"Key\"].ArrowLeft.down()\r\n    TouchStart.init()\r\n  }\r\n\r\n  if (TouchStart.y - Mouse.y > 50 && _keys__WEBPACK_IMPORTED_MODULE_1__[\"Key\"].ArrowUp.down) {\r\n    _keys__WEBPACK_IMPORTED_MODULE_1__[\"Key\"].ArrowUp.down()\r\n    TouchStart.init()\r\n  } else if (Mouse.y - TouchStart.y > 50 && _keys__WEBPACK_IMPORTED_MODULE_1__[\"Key\"].ArrowDown.down) {\r\n    _keys__WEBPACK_IMPORTED_MODULE_1__[\"Key\"].ArrowDown.down()\r\n    TouchStart.init()\r\n  }\r\n  e.preventDefault();\r\n}\r\n\r\n_canvas__WEBPACK_IMPORTED_MODULE_0__[\"canvas\"].ontouchend = _canvas__WEBPACK_IMPORTED_MODULE_0__[\"canvas\"].onmouseup = function (e) {\r\n  updateEvent(e)\r\n  if (Mouse.up) Mouse.up()\r\n}\r\n\r\n_canvas__WEBPACK_IMPORTED_MODULE_0__[\"canvas\"].onclick = function (e) {\r\n  updateEvent(e)\r\n  if (Mouse.click) Mouse.click()\r\n}\r\n\r\n\r\n\n\n//# sourceURL=webpack:///./src/mouse.js?");

/***/ }),

/***/ "./src/resource.js":
/*!*************************!*\
  !*** ./src/resource.js ***!
  \*************************/
/*! exports provided: Rss, loadRssAndRun */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Rss\", function() { return Rss; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"loadRssAndRun\", function() { return loadRssAndRun; });\n/* harmony import */ var _canvas__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./canvas */ \"./src/canvas.js\");\n/* harmony import */ var _shapes__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./shapes */ \"./src/shapes.js\");\n\r\n\r\n\r\nlet count = 0\r\nlet loaded = 0\r\nlet main\r\n\r\nfunction loadRssAndRun (func) {\r\n  main = func\r\n  check()\r\n}\r\n\r\nlet Rss = {}\r\nRss.add = function () { count++ }\r\nRss.load = function () { loaded++ }\r\nRss.isLoaded = function () { return loaded >= count }\r\n\r\nlet n = 0\r\n\r\nfunction check () {\r\n  _canvas__WEBPACK_IMPORTED_MODULE_0__[\"canvas\"].clear()\r\n  if (Rss.isLoaded()) { main() } else {   \r\n\r\n    new _shapes__WEBPACK_IMPORTED_MODULE_1__[\"Text\"]('LeapLearner', _canvas__WEBPACK_IMPORTED_MODULE_0__[\"canvas\"].width / 2 - 110, 200, 40).draw()\r\n\r\n    let msg = 'loading'\r\n    for (let i = 0; i < n % 6; i++) { msg += '.' }\r\n    new _shapes__WEBPACK_IMPORTED_MODULE_1__[\"Text\"](msg, _canvas__WEBPACK_IMPORTED_MODULE_0__[\"canvas\"].width / 2 - 40, _canvas__WEBPACK_IMPORTED_MODULE_0__[\"canvas\"].height - 240).draw()\r\n\r\n    new _shapes__WEBPACK_IMPORTED_MODULE_1__[\"Rectangle\"](50, _canvas__WEBPACK_IMPORTED_MODULE_0__[\"canvas\"].height - 200, _canvas__WEBPACK_IMPORTED_MODULE_0__[\"canvas\"].width - 100, 10).fill()\r\n\r\n    let r2 = new _shapes__WEBPACK_IMPORTED_MODULE_1__[\"Rectangle\"](50, _canvas__WEBPACK_IMPORTED_MODULE_0__[\"canvas\"].height - 200, (_canvas__WEBPACK_IMPORTED_MODULE_0__[\"canvas\"].width - 100) * loaded / count, 10)\r\n    r2.fillStyle = 'orange'\r\n    r2.fill()\r\n\r\n    n++\r\n    setTimeout(check, 100)\r\n  }\r\n}\r\n\r\n\r\n\n\n//# sourceURL=webpack:///./src/resource.js?");

/***/ }),

/***/ "./src/shapes.js":
/*!***********************!*\
  !*** ./src/shapes.js ***!
  \***********************/
/*! exports provided: Shape, Line, Rectangle, Polygon, Triangle, Circle, Point, Text, Sprite, Animation, Ellipse */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Shape\", function() { return Shape; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Line\", function() { return Line; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Rectangle\", function() { return Rectangle; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Polygon\", function() { return Polygon; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Triangle\", function() { return Triangle; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Circle\", function() { return Circle; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Point\", function() { return Point; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Text\", function() { return Text; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Sprite\", function() { return Sprite; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Animation\", function() { return Animation; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Ellipse\", function() { return Ellipse; });\n/* harmony import */ var _canvas__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./canvas */ \"./src/canvas.js\");\n/* harmony import */ var _util__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./util */ \"./src/util.js\");\n/* harmony import */ var _mouse__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./mouse */ \"./src/mouse.js\");\n/* harmony import */ var _transform__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./transform */ \"./src/transform.js\");\n/* harmony import */ var _resource__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./resource */ \"./src/resource.js\");\n/* harmony import */ var _collision__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./collision */ \"./src/collision.js\");\n/* harmony import */ var _clone__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./clone */ \"./src/clone.js\");\n/* harmony import */ var _clone__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(_clone__WEBPACK_IMPORTED_MODULE_6__);\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nclass Shape {\r\n  constructor () {\r\n    this.transform = new _transform__WEBPACK_IMPORTED_MODULE_3__[\"default\"]()\r\n    this._points = []\r\n  }\r\n\r\n  _path () {}\r\n  _stroke () {\r\n    this._path()\r\n    _canvas__WEBPACK_IMPORTED_MODULE_0__[\"ctx\"].stroke()\r\n  }\r\n  _fill () {\r\n    this._path()\r\n    _canvas__WEBPACK_IMPORTED_MODULE_0__[\"ctx\"].fill()\r\n  }\r\n\r\n  stroke () {\r\n    if (this.click) _util__WEBPACK_IMPORTED_MODULE_1__[\"clickShapes\"].add(this) // use for handle click event\r\n\r\n    _canvas__WEBPACK_IMPORTED_MODULE_0__[\"ctx\"].save()\r\n    _canvas__WEBPACK_IMPORTED_MODULE_0__[\"ctx\"].update(this)\r\n    this._stroke()\r\n    _canvas__WEBPACK_IMPORTED_MODULE_0__[\"ctx\"].restore()\r\n  }\r\n\r\n  fill () {\r\n    if (this.click) _util__WEBPACK_IMPORTED_MODULE_1__[\"clickShapes\"].add(this) // use for handle click event\r\n\r\n    _canvas__WEBPACK_IMPORTED_MODULE_0__[\"ctx\"].save()\r\n    _canvas__WEBPACK_IMPORTED_MODULE_0__[\"ctx\"].update(this)\r\n    this._fill()\r\n    _canvas__WEBPACK_IMPORTED_MODULE_0__[\"ctx\"].restore()\r\n  }\r\n\r\n  _draw () {\r\n    this._path()\r\n    if(this.strokeStyle){\r\n      _canvas__WEBPACK_IMPORTED_MODULE_0__[\"ctx\"].stroke();\r\n    }\r\n    _canvas__WEBPACK_IMPORTED_MODULE_0__[\"ctx\"].fill()\r\n  }\r\n\r\n  draw () {\r\n    if (this.click) _util__WEBPACK_IMPORTED_MODULE_1__[\"clickShapes\"].add(this) // use for handle click event\r\n\r\n    _canvas__WEBPACK_IMPORTED_MODULE_0__[\"ctx\"].save()\r\n    _canvas__WEBPACK_IMPORTED_MODULE_0__[\"ctx\"].update(this)\r\n    this._draw()\r\n    _canvas__WEBPACK_IMPORTED_MODULE_0__[\"ctx\"].restore()\r\n  }\r\n\r\n  translate (x, y) { this.transform.translate(x, y) }\r\n  scale (x, y) { this.transform.scale(x, y) }\r\n  skew (x, y) { this.transform.skew(x, y) }\r\n  setAnchor (x, y) { this.transform.setAnchor(x, y) }\r\n  rotate (degree) { this.transform.rotate(degree) }\r\n\r\n  getRealPoint (p) { return this.transform.getRealPoint(p) }\r\n\r\n  click () {}\r\n  touched () { return Object(_collision__WEBPACK_IMPORTED_MODULE_5__[\"pointInShape\"])(_mouse__WEBPACK_IMPORTED_MODULE_2__[\"Mouse\"], this) }\r\n\r\n  collide (other) {\r\n    if (other instanceof Shape) {\r\n      return Object(_collision__WEBPACK_IMPORTED_MODULE_5__[\"collide\"])(this, other)\r\n    } else {\r\n      return false\r\n    }\r\n  }\r\n\r\n  clone () { return _clone__WEBPACK_IMPORTED_MODULE_6___default()(this, false); }\r\n\r\n  _updatePoints () {}\r\n\r\n  get points () {\r\n    this._updatePoints()\r\n    return this._points.map(p => this.transform.getRealPoint(p))\r\n  }\r\n\r\n  setLineDash (arr) {\r\n    this.lineDash = arr\r\n  }\r\n\r\n  get minX () { return Math.min(...this._points.map(p => p.x)); };\r\n  get minY () { return Math.min(...this._points.map(p => p.y)); };\r\n  get maxX () { return Math.max(...this._points.map(p => p.x)); };\r\n  get maxY () { return Math.max(...this._points.map(p => p.y)); };\r\n\r\n  updateAnchor() {\r\n    this._updatePoints();\r\n    this.transform.anchorX = this.minX + (this.maxX - this.minX) * this.transform.anchor.x;\r\n    this.transform.anchorY = this.minY + (this.maxY - this.minY) * this.transform.anchor.y;\r\n  }\r\n}\r\n\r\nclass Circle extends Shape {\r\n  constructor (x = 50, y = 50, r = 20, color=\"orange\") {\r\n    super()\r\n    this.x = x\r\n    this.y = y\r\n    this.r = r\r\n    this.fillStyle = color\r\n  }\r\n\r\n  get radius () { return this.r }\r\n  set radius (r) { this.r = r }\r\n\r\n  _path () {\r\n    _canvas__WEBPACK_IMPORTED_MODULE_0__[\"ctx\"].beginPath()\r\n    _canvas__WEBPACK_IMPORTED_MODULE_0__[\"ctx\"].arc(this.x, this.y, this.r, 0, 2 * Math.PI)\r\n  }\r\n\r\n  _updatePoints () {\r\n    this._points = []\r\n    let n = 8\r\n    let degree = Math.PI * 2 / n\r\n    for (let i = 0; i < n; i++) {\r\n      this._points.push({\r\n        x: this.x + this.r * Math.sin(degree * i),\r\n        y: this.y + this.r * Math.cos(degree * i)\r\n      })\r\n    }\r\n  }\r\n}\r\n\r\nclass Line extends Shape {\r\n  constructor (x1 = 100, y1 = 100, x2 = 200, y2 = 100, lineWidth=1, color=\"orange\") {\r\n    super()\r\n    this.x1 = x1\r\n    this.y1 = y1\r\n    this.x2 = x2\r\n    this.y2 = y2\r\n    this.lineWidth = lineWidth\r\n    this.strokeStyle = color\r\n  }\r\n\r\n  _path () {\r\n    _canvas__WEBPACK_IMPORTED_MODULE_0__[\"ctx\"].beginPath()\r\n    _canvas__WEBPACK_IMPORTED_MODULE_0__[\"ctx\"].moveTo(this.x1, this.y1)\r\n    _canvas__WEBPACK_IMPORTED_MODULE_0__[\"ctx\"].lineTo(this.x2, this.y2)\r\n  }\r\n\r\n  _updatePoints () {\r\n    this._points = []\r\n    this._points.push({x: this.x1, y: this.y1})\r\n    this._points.push({x: this.x2, y: this.y2})\r\n  }\r\n\r\n  get x () { return (this.x1 + this.x2) / 2 }\r\n  set x (x) {\r\n    let deltaX = x - this.x\r\n    this.x1 += deltaX\r\n    this.x2 += deltaX\r\n  }\r\n\r\n  get y () { return (this.y1 + this.y2) / 2 }\r\n  set y (y) {\r\n    let deltaY = y - this.y\r\n    this.y1 += deltaY\r\n    this.y2 += deltaY\r\n  }\r\n}\r\n\r\nLine.prototype.draw = Line.prototype.stroke;\r\n\r\nclass Polygon extends Shape {\r\n  constructor () {\r\n    super()\r\n    if (arguments.length < 6) {\r\n      throw String('Polygon should have at lease 3 points')\r\n    }\r\n\r\n    this._points = []\r\n    for (let i = 0; i < arguments.length - 1; i += 2) {\r\n      let p = { x: arguments[i], y: arguments[i + 1] }\r\n      this._points.push(p)\r\n    }\r\n\r\n    if(typeof (arguments[-1]) == \"string\"){\r\n      this.fillStyle = arguments[-1];\r\n    }\r\n  }\r\n\r\n  _path () {\r\n    _canvas__WEBPACK_IMPORTED_MODULE_0__[\"ctx\"].beginPath()\r\n    let p = this._points[0]\r\n    _canvas__WEBPACK_IMPORTED_MODULE_0__[\"ctx\"].moveTo(p.x, p.y)\r\n    for (let i = 1; i < this._points.length; i++) {\r\n      p = this._points[i]\r\n      _canvas__WEBPACK_IMPORTED_MODULE_0__[\"ctx\"].lineTo(p.x, p.y)\r\n    }\r\n    _canvas__WEBPACK_IMPORTED_MODULE_0__[\"ctx\"].closePath()\r\n  }\r\n\r\n  get x () { return (this.minX + this.maxX)/2 };\r\n  set x (x) {\r\n    let deltaX = x - this.x\r\n    for (let i = 0; i < this._points.length; i++) { this._points[i].x += deltaX }\r\n  }\r\n\r\n  get y () { return (this.minY + this.maxY)/2 };\r\n  set y (y) {\r\n    let deltaY = y - this.y\r\n    for (let i = 0; i < this._points.length; i++) { this._points[i].y += deltaY }\r\n  }\r\n}\r\n\r\nclass Rectangle extends Shape {\r\n  constructor (x = 100, y = 100, w = 100, h = 50, color=\"orange\") {\r\n    super()\r\n    this.x = x\r\n    this.y = y\r\n    this.w = w\r\n    this.h = h\r\n    this.fillStyle = color\r\n    this.collideW = 1\r\n    this.collideH = 1\r\n  }\r\n\r\n  get width () { return this.w }\r\n  set width (w) { this.w = w }\r\n\r\n  get height () { return this.h }\r\n  set height (h) { this.h = h }\r\n\r\n  _path () {\r\n    _canvas__WEBPACK_IMPORTED_MODULE_0__[\"ctx\"].beginPath()\r\n    _canvas__WEBPACK_IMPORTED_MODULE_0__[\"ctx\"].rect(this.x, this.y, this.w, this.h)\r\n  }\r\n\r\n  setCollisionScale (w, h) {\r\n    this.collideW = w\r\n    this.collideH = h\r\n  }\r\n\r\n  _updatePoints () {\r\n    this._points = []\r\n\r\n    let minX = this.x + this.w / 2 * (1 - this.collideW)\r\n    let maxX = this.x + this.w / 2 * (1 + this.collideW)\r\n    let minY = this.y + this.h / 2 * (1 - this.collideH)\r\n    let maxY = this.y + this.h / 2 * (1 + this.collideH)\r\n\r\n    this._points.push({x: minX, y: minY})\r\n    this._points.push({x: minX, y: maxY})\r\n    this._points.push({x: maxX, y: maxY})\r\n    this._points.push({x: maxX, y: minY})\r\n  }\r\n}\r\n\r\nclass Text extends Rectangle {\r\n  constructor (src = 'LeapLearner', x = 0, y = 0, size = 20, color=\"orange\", font = 'Arial') {\r\n    super(x, y, 100, size)\r\n    this._src = src\r\n    this._font = font\r\n    this.fillStyle = color\r\n    this._updateWidth()\r\n  }\r\n\r\n  _updateWidth () {\r\n    _canvas__WEBPACK_IMPORTED_MODULE_0__[\"ctx\"].save()\r\n    _canvas__WEBPACK_IMPORTED_MODULE_0__[\"ctx\"].update(this)\r\n    _canvas__WEBPACK_IMPORTED_MODULE_0__[\"ctx\"].font = this.h + 'px ' + this._font\r\n    this.w = _canvas__WEBPACK_IMPORTED_MODULE_0__[\"ctx\"].measureText(this._src).width\r\n    _canvas__WEBPACK_IMPORTED_MODULE_0__[\"ctx\"].restore()\r\n  }\r\n\r\n  get src () { return this._src }\r\n  set src (src) {\r\n    this._src = src\r\n    this._updateWidth()\r\n  }\r\n\r\n  get size () { return this.h }\r\n  set size (size) {\r\n    this.h = size\r\n    this._updateWidth()\r\n  }\r\n\r\n  get font () { return this._font }\r\n  set font (font) {\r\n    this._font = font\r\n    this._updateWidth()\r\n  }\r\n\r\n  _stroke () {\r\n    _canvas__WEBPACK_IMPORTED_MODULE_0__[\"ctx\"].font = this.size + 'px ' + this.font\r\n    _canvas__WEBPACK_IMPORTED_MODULE_0__[\"ctx\"].strokeText(this.src, this.x, this.y)\r\n  }\r\n\r\n  _fill () {\r\n    _canvas__WEBPACK_IMPORTED_MODULE_0__[\"ctx\"].font = this.size + 'px ' + this.font\r\n    _canvas__WEBPACK_IMPORTED_MODULE_0__[\"ctx\"].fillText(this.src, this.x, this.y)\r\n  }\r\n\r\n  draw () { this.fill() }\r\n}\r\n\r\nclass Sprite extends Rectangle {\r\n  constructor (src, x = 0, y = 0, w = null, h = null) {\r\n    super(x, y, w, h);\r\n    this.collideW = 0.8;\r\n    this.collideH = 0.8;\r\n\r\n    this.img = new window.Image();\r\n    this.img.crossOrigin = 'anonymous';\r\n    this.img.onload = function(){ _resource__WEBPACK_IMPORTED_MODULE_4__[\"Rss\"].load(); };\r\n    this.img.onerror = function(){ console.log(\"图片加载失败：\" + this.src); };\r\n    this.img.src = src;\r\n\r\n    _resource__WEBPACK_IMPORTED_MODULE_4__[\"Rss\"].add();\r\n  }\r\n\r\n  get src () { return this.img.src }\r\n  set src (src) { this.img.src = src }\r\n\r\n  set onload (callback) {\r\n    this.img.onload = function () {\r\n      callback()\r\n    }\r\n  }\r\n\r\n  clip (sx, sy, sw, sh) {\r\n    this.sx = sx > 0 ? sx : 1;\r\n    this.sy = sy > 0 ? sy : 1;\r\n    this.sw = sw;\r\n    this.sh = sh;\r\n  }\r\n\r\n  _draw () {\r\n    if (this.sx && this.sy && this.sw & this.sh) {\r\n      _canvas__WEBPACK_IMPORTED_MODULE_0__[\"ctx\"].drawImage(this.img, this.sx, this.sy, this.sw, this.sh,\r\n        this.x, this.y, this.w, this.h)\r\n    } else if (this.w && this.h) {\r\n      _canvas__WEBPACK_IMPORTED_MODULE_0__[\"ctx\"].drawImage(this.img, this.x, this.y, this.w, this.h)\r\n    } else {\r\n      _canvas__WEBPACK_IMPORTED_MODULE_0__[\"ctx\"].drawImage(this.img, this.x, this.y)\r\n    }\r\n  }\r\n\r\n  fill () {}\r\n  stroke () {}\r\n}\r\n\r\nclass Animation extends Sprite {\r\n  constructor (src, x, y, w, h) {\r\n    super(src, x, y, w, h)\r\n    this.speed = 10;\r\n    this._cf = 0; // current frame count\r\n  }\r\n\r\n  setFrame (c, r = 1) {\r\n    this._c = c\r\n    this._r = r;\r\n  }\r\n\r\n  setSpeed (speed) {\r\n    this.speed = speed\r\n    if (this.speed < 1) this.speed = 1;\r\n    if (this.speed > 100) this.speed = 100;\r\n  }\r\n\r\n  _draw () {\r\n  \tthis.sw = this.img.naturalWidth / this._c;\r\n    this.sh = this.img.naturalHeight / this._r;\r\n\r\n    this.w = this.w || this.sw;\r\n  \tthis.h = this.h || this.sh;\r\n\r\n    let sx = this.sw * (Math.floor(this._cf * this.speed / 60) % this._c)\r\n    let sy = this.sh * (Math.floor(this._cf * this.speed / 60 / this._c) % this._r)\r\n    _canvas__WEBPACK_IMPORTED_MODULE_0__[\"ctx\"].drawImage(this.img, sx, sy, this.sw, this.sh,\r\n      this.x, this.y, this.w, this.h)\r\n\r\n    this._cf++ // update frame count\r\n  }\r\n}\r\n\r\nclass Point extends Circle {\r\n  constructor (x, y, color=\"red\") {\r\n    super(x, y, 0.5)\r\n    this.fillStyle = color\r\n    this.strokeStyle = 'rgba(0, 0, 0, 0)'\r\n  }\r\n}\r\n\r\nclass Ellipse extends Shape {\r\n  constructor (x, y, rX, rY, color=\"orange\") {\r\n    super()\r\n    this.x = x\r\n    this.y = y\r\n    this.rX = rX\r\n    this.rY = rY\r\n    this.fillStyle = color;\r\n  }\r\n\r\n  _path () {\r\n    _canvas__WEBPACK_IMPORTED_MODULE_0__[\"ctx\"].beginPath()\r\n    _canvas__WEBPACK_IMPORTED_MODULE_0__[\"ctx\"].ellipse(this.x, this.y, this.rX, this.rY, 0, 0, Math.PI * 2)\r\n  }\r\n\r\n  _updatePoints () {\r\n    this._points = []\r\n    let n = 8\r\n    let degree = Math.PI * 2 / n\r\n    for (let i = 0; i < n; i++) {\r\n      this._points.push({\r\n        x: this.x + this.rX * Math.sin(degree * i), // ? to be confirmed\r\n        y: this.y + this.rY * Math.cos(degree * i) // ? to be confirmed\r\n      })\r\n    }\r\n  }\r\n\r\n  get radiusX () { return this.rX }\r\n  set radiusX (rX) { this.rX = rX }\r\n\r\n  get radiusY () { return this.rY }\r\n  set radiusY (rY) { this.rY = rY }\r\n}\r\n\r\nPoint.prototype.draw = Point.prototype.fill\r\nconst Triangle = Polygon\r\n\r\n\r\n\n\n//# sourceURL=webpack:///./src/shapes.js?");

/***/ }),

/***/ "./src/transform.js":
/*!**************************!*\
  !*** ./src/transform.js ***!
  \**************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return Transform; });\nclass Transform {\r\n  constructor () {\r\n    this.anchorX = 0\r\n    this.anchorY = 0\r\n    this.scaleX = 1\r\n    this.scaleY = 1\r\n    this.skewX = 0\r\n    this.skewY = 0\r\n    this.translateX = 0\r\n    this.translateY = 0\r\n    this._degree = 0\r\n    this.anchor = {x: 0.5, y: 0.5};\r\n  }\r\n\r\n  transformed () {\r\n    return this.scaleX !== 1 || this.scaleY !== 1 ||\r\n      this.skewX || this.skewY ||\r\n      this.translateX || this.translateY || this._degree\r\n  }\r\n\r\n  scale (x, y) {\r\n    this.scaleX = x\r\n    this.scaleY = y\r\n  }\r\n\r\n  translate (x, y) {\r\n    this.translateX = x\r\n    this.translateY = y\r\n  }\r\n\r\n  skew (x, y) {\r\n    this.skewX = x\r\n    this.skewY = y\r\n  }\r\n\r\n  setAnchor (x, y) {\r\n    this.anchor.x = x\r\n    this.anchor.y = y\r\n  }\r\n\r\n  rotate (degree) {\r\n    this._degree = degree;\r\n  }\r\n\r\n  get degree() { return this._degree  * Math.PI / 180; };\r\n\r\n  getRealPoint (p) {\r\n    if (!this.transformed()) { return p }\r\n\r\n    let x = p.x\r\n    let y = p.y\r\n\r\n    x -= this.anchorX\r\n    y -= this.anchorY\r\n\r\n    let degree = this.degree;\r\n    let sin = Math.sin(degree);\r\n    let cos = Math.cos(degree);\r\n\r\n    let newX = x * cos - y * sin\r\n    let newY = y * cos + x * sin\r\n    x = newX\r\n    y = newY\r\n\r\n    newX = this.scaleX * x + this.skewX * y + this.translateX\r\n    newY = this.skewY * x + this.scaleY * y + this.translateY\r\n    x = newX\r\n    y = newY\r\n\r\n    x += this.anchorX\r\n    y += this.anchorY\r\n\r\n    return {x, y}\r\n  }\r\n}\r\n\n\n//# sourceURL=webpack:///./src/transform.js?");

/***/ }),

/***/ "./src/util.js":
/*!*********************!*\
  !*** ./src/util.js ***!
  \*********************/
/*! exports provided: nextFrame, clickShapes, run, stop */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"nextFrame\", function() { return nextFrame; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"clickShapes\", function() { return clickShapes; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"run\", function() { return run; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"stop\", function() { return stop; });\n// void run multi frame\r\nvar frameId\r\nvar nextFrame = function (func) {\r\n  if (frameId) window.cancelAnimationFrame(frameId)\r\n  frameId = window.requestAnimationFrame(func)\r\n}\r\n\r\n// handle shape click event;\r\nvar clickShapes = new Set()\r\n\r\n//\r\nconst runningFuncs = {};\r\nconst run = function (func, interval=20) {\r\n  stop(func);\r\n  runningFuncs[func.name] = setInterval(func, interval);\r\n}\r\n\r\nconst stop = function (func) {\r\n  let id = runningFuncs[func.name];\r\n  if(id) clearInterval(id)\r\n}\r\n\r\n\r\n\n\n//# sourceURL=webpack:///./src/util.js?");

/***/ })

/******/ });